zabbix_export:
  version: '5.4'
  date: '2022-06-08T08:28:19Z'
  groups:
    -
      uuid: 43d0fe04c7094000829b0d28c6e3470c
      name: 'Custom Templates'
  templates:
    -
      uuid: 29106851006d44c6a8d21c74172cf4fb
      template: 'MaxDB DBMMonitor'
      name: 'MaxDB DBMMonitor'
      description: 'MaxDB instance monitor'
      groups:
        -
          name: 'Custom Templates'
      discovery_rules:
        -
          uuid: ac5b387c506f46eb9b615c1f978d7a53
          name: 'MaxDB discovery'
          key: 'maxdb.discovery[{$MAXDBINIPATH},{$MAXDBEXCLUDEDB},{$MAXDBONLYDB}]'
          delay: 4h
          lifetime: 7d
          description: 'Discover MaxDB installations'
          item_prototypes:
            -
              uuid: d27a1401f8f547eeb835d91e4fbf7c12
              name: '{#MAXDBNAME} Backup DAT daily ckeck today'
              type: DEPENDENT
              key: 'maxdb.backup.dat.checkdaily[{#MAXDBNAME}]'
              delay: '0'
              history: 1d
              trends: '0'
              description: 'Flag whether it is necessary to check the status of the daily copy today'
              valuemap:
                name: 'MaxDB DBMMonitor backup daily check'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.zm_backup_daily_dat_days
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value.length == 0) return 0;
                      
                      //Get current day
                      var today = new Date();
                      var day = today.getDay();
                      
                      //If current day are in list for checking AND current time greater than check time - return 1, otherwise return 0
                      if (value.includes(day.toString())){
                      return 1;
                      } else {
                      return 0;
                      }
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 9c45c9bc30304196be7344fdab00a7af
              name: '{#MAXDBNAME} Backup DAT daily ckeck time'
              type: DEPENDENT
              key: 'maxdb.backup.dat.checktime[{#MAXDBNAME}]'
              delay: '0'
              history: 1d
              trends: '0'
              description: 'Time of day from which the status of the daily copy will be checked'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.zm_backup_daily_dat_time
                -
                  type: JAVASCRIPT
                  parameters:
                    - |
                      if (value.length == 0) return 0;
                      
                      //Get check time
                      return parseInt(value);
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 06307da270e541d583335e2561a52371
              name: '{#MAXDBNAME} Backup DAT duration'
              type: DEPENDENT
              key: 'maxdb.backup.dat.duration[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: s
              description: 'Last DataArea backup duration'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_DURATION
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: ba53fceefa504f678b9207e9725bc807
              name: '{#MAXDBNAME} Backup DAT end date'
              type: DEPENDENT
              key: 'maxdb.backup.dat.enddate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea backup end date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_END_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 21297da20aa84f1dadedbc358098f223
              name: '{#MAXDBNAME} Backup DAT end time'
              type: DEPENDENT
              key: 'maxdb.backup.dat.endtime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea backup end time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_END_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: bcfb2176b37847cc96cd33a5119adc4f
              name: '{#MAXDBNAME} Backup DAT message'
              type: DEPENDENT
              key: 'maxdb.backup.dat.message[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Last DataArea backup message'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_MESSAGE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 88dafbbfd0cb438c97df39789ebeea93
              name: '{#MAXDBNAME} Backup DAT number'
              type: DEPENDENT
              key: 'maxdb.backup.dat.number[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea backup number'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_NUMBER
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: afd6e1879f414072b9ede8654cc8c32a
              name: '{#MAXDBNAME} Backup DAT start date'
              type: DEPENDENT
              key: 'maxdb.backup.dat.startdate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea backup start date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_START_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 4b52ad7381d2444da3c4a6abaea98cac
              name: '{#MAXDBNAME} Backup DAT start time'
              type: DEPENDENT
              key: 'maxdb.backup.dat.starttime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea backup start time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_START_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: bcdfa622eb9d47daacd59e2a20063c86
              name: '{#MAXDBNAME} Backup DAT successful'
              type: DEPENDENT
              key: 'maxdb.backup.dat.successful[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is Last DataArea backup successful'
              valuemap:
                name: 'MaxDB DBMMonitor backup state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.DAT_SUCCESSFUL
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
              trigger_prototypes:
                -
                  uuid: fb76308a0a8e440bbdbe0ce79e026973
                  expression: 'last(/MaxDB DBMMonitor/maxdb.backup.dat.successful[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} last DAT backup failed'
                  priority: WARNING
                  description: 'This error occurs when the last DataArea full backup failed.'
                  manual_close: 'YES'
            -
              uuid: 82fdbe3cbf4c4534878abd0bfc77c791
              name: '{#MAXDBNAME} get backup info error'
              type: DEPENDENT
              key: 'maxdb.backup.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting backup status data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: fd2b6bb36d1e4513a6c3c45edf1ef344
              name: '{#MAXDBNAME} Backup LOG duration'
              type: DEPENDENT
              key: 'maxdb.backup.log.duration[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: s
              description: 'Last LogArea backup duration'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_DURATION
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 7b656fb0f67c428b8a0de8fe27d77a8f
              name: '{#MAXDBNAME} Backup LOG end date'
              type: DEPENDENT
              key: 'maxdb.backup.log.enddate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last LogArea backup end date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_END_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 505d502c44d34d34a68a7e3d0ed336ed
              name: '{#MAXDBNAME} Backup LOG end time'
              type: DEPENDENT
              key: 'maxdb.backup.log.endtime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last LogArea backup end time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_END_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: c0582ccbc3e445239204ec6390de8da4
              name: '{#MAXDBNAME} Backup LOG message'
              type: DEPENDENT
              key: 'maxdb.backup.log.message[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Last LogArea backup message'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_MESSAGE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 35b5fd36cd864461800f444c9cb897b3
              name: '{#MAXDBNAME} Backup LOG number'
              type: DEPENDENT
              key: 'maxdb.backup.log.number[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last LogArea backup number'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_NUMBER
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 906c17c29d80485cbb84e1c9353fe542
              name: '{#MAXDBNAME} Backup LOG start date'
              type: DEPENDENT
              key: 'maxdb.backup.log.startdate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last LogArea backup start date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_START_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 1708759a3fa34441931400dc2443d396
              name: '{#MAXDBNAME} Backup LOG start time'
              type: DEPENDENT
              key: 'maxdb.backup.log.starttime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last LogArea backup start time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_START_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: fb82c9ca87a94e39bcb3878485ddc4ba
              name: '{#MAXDBNAME} Backup LOG successful'
              type: DEPENDENT
              key: 'maxdb.backup.log.successful[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is Last LogArea backup successful'
              valuemap:
                name: 'MaxDB DBMMonitor backup state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.LOG_SUCCESSFUL
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 9151b0d8394b4fba82c4d276a0811268
              name: '{#MAXDBNAME} Backup PAG duration'
              type: DEPENDENT
              key: 'maxdb.backup.pag.duration[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: s
              description: 'Last DataArea incremental backup duration'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_DURATION
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 256a7d7afa7443a2a55fd83f070a7392
              name: '{#MAXDBNAME} Backup PAG end date'
              type: DEPENDENT
              key: 'maxdb.backup.pag.enddate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea incremental backup end date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_END_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 4d2e8267ef924022a00f00b261156ce0
              name: '{#MAXDBNAME} Backup PAG end time'
              type: DEPENDENT
              key: 'maxdb.backup.pag.endtime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea incremental backup end time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_END_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 4ab5dba737734f07961cf9dc3fd5994b
              name: '{#MAXDBNAME} Backup PAG message'
              type: DEPENDENT
              key: 'maxdb.backup.pag.message[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Last DataArea incremental backup message'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_MESSAGE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: d1cd3931e05e40f1a6c6d71b3c269881
              name: '{#MAXDBNAME} Backup PAG number'
              type: DEPENDENT
              key: 'maxdb.backup.pag.number[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea incremental backup number'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_NUMBER
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: f935880032dd467ca1d0c13897bcf8cc
              name: '{#MAXDBNAME} Backup PAG start date'
              type: DEPENDENT
              key: 'maxdb.backup.pag.startdate[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea incremental backup start date'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_START_DATE
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 9030e6427170423ab587c44aef4eb8c7
              name: '{#MAXDBNAME} Backup PAG start time'
              type: DEPENDENT
              key: 'maxdb.backup.pag.starttime[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Last DataArea incremental backup start time'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_START_TIME
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: d0f9aed96b374f0fa3314305ac3ea8b7
              name: '{#MAXDBNAME} Backup PAG successful'
              type: DEPENDENT
              key: 'maxdb.backup.pag.successful[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is last DataArea incremental backup successful'
              valuemap:
                name: 'MaxDB DBMMonitor backup state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.PAG_SUCCESSFUL
              master_item:
                key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
              trigger_prototypes:
                -
                  uuid: 36345c4a13784c548ef525c1484d171b
                  expression: 'last(/MaxDB DBMMonitor/maxdb.backup.pag.successful[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} last PAG backup failed'
                  priority: WARNING
                  description: 'This error occurs when the last DataArea incremental backup failed.'
                  manual_close: 'YES'
            -
              uuid: 6f9c742facc34dbd843005f7bfc04a50
              name: '{#MAXDBNAME} backup data'
              key: 'maxdb.backup[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 30m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <backup_history_list -c LABEL,START,STOP,RC,ERROR -Inverted>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Backup'
            -
              uuid: 7d536c99c1124b87a1c0085cd59a5a7a
              name: '{#MAXDBNAME} Cache catalog hit rate'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.catalog[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of successful accesses to catalog cache'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cache_hitrate_catalogcache
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: 8cbf974d0417411d9bc9f1cbf68daa34
              name: '{#MAXDBNAME} Cache command execute hit rate'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.commandexecute[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of successful accesses to command execute cache'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cache_hitrate_commandexecute
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: 5b8ad80ecfec4a47aebd391e5dba4543
              name: '{#MAXDBNAME} Cache command prepare hit rate'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.commandprepare[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of successful accesses to command prepare cache'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cache_hitrate_commandprepare
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: bf9b740fdfb94fc9a7744d422a82f35a
              name: '{#MAXDBNAME} Cache data hit rate'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.data[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of successful accesses to data cache'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cache_hitrate_data
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: ba4c5269ec74468cb69b6a46ae31c777
              name: '{#MAXDBNAME} get caches hitrate error'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting caches hitrate data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: f3695ff2437040e3b373cfcb6aba5cf0
              name: '{#MAXDBNAME} Cache sequence hit rate'
              type: DEPENDENT
              key: 'maxdb.cache.hitrate.sequence[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of successful accesses to sequence cache'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.cache_hitrate_sequence
              master_item:
                key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: 4a6371d556f94dc9b5048002d3fa7ac0
              name: '{#MAXDBNAME} cache hit rate'
              key: 'maxdb.cache.hitrate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <info caches>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Cache'
            -
              uuid: 30fc059aaff942a7b31fbd2eb453fc62
              name: '{#MAXDBNAME} Bad devspaces count'
              type: DEPENDENT
              key: 'maxdb.common.bad_devspaces[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of bad devspases'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.bad_devspaces
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: 1f204becc1fb4004ba6e4d42ab8bfad4
                  expression: 'change(/MaxDB DBMMonitor/maxdb.common.bad_devspaces[{#MAXDBNAME}])>0'
                  name: 'There are new bad devspaces in the database {#MAXDBNAME}'
                  priority: INFO
                  description: 'This message informs that there are new bad devspaces in the database.'
                  manual_close: 'YES'
            -
              uuid: fa711a94bb1c44b0818947e2648cb36d
              name: '{#MAXDBNAME} Bad indexes count'
              type: DEPENDENT
              key: 'maxdb.common.bad_indexes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of bad indexes'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.bad_indexes
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: ffcc5e695ca444feb9e03aab2d515540
                  expression: 'change(/MaxDB DBMMonitor/maxdb.common.bad_indexes[{#MAXDBNAME}])>0'
                  name: 'There are new bad indexes in the database {#MAXDBNAME}'
                  priority: INFO
                  description: 'This message informs that there are new bad indexes in the database.'
                  manual_close: 'YES'
            -
              uuid: 2d1d606628e04e299d81fe7e94c5d776
              name: '{#MAXDBNAME} Command monitoring'
              type: DEPENDENT
              key: 'maxdb.common.command_monitoring[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is command monitoring enabled'
              valuemap:
                name: 'MaxDB DBMMonitor switch state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.command_monitoring
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: e6b41a6a7a9046008fbc5e9adab9591d
                  expression: 'last(/MaxDB DBMMonitor/maxdb.common.command_monitoring[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} command monitoring disabled'
                  status: DISABLED
                  priority: INFO
                  description: 'This message informs that command monitoring mode has been disabled in the database.'
            -
              uuid: 4d96e256a3de49fd9cc8f8d78871448a
              name: '{#MAXDBNAME} Connect possible'
              type: DEPENDENT
              key: 'maxdb.common.connect_possible[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: 30d
              description: 'Is it possible to create a new connection to {#MAXDBNAME}'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.connect_possible
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: 08129058afe8492795a4a22dfbea8a2f
                  expression: 'last(/MaxDB DBMMonitor/maxdb.common.connect_possible[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} connect not possible'
                  priority: WARNING
                  description: 'This error occurs when the DB reports that it cannot be connected to.'
            -
              uuid: 5abd474b37254a9e920b6fc6c5371505
              name: '{#MAXDBNAME} DB monitoring'
              type: DEPENDENT
              key: 'maxdb.common.database_monitoring[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is database monitoring enabled'
              valuemap:
                name: 'MaxDB DBMMonitor switch state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.database_monitoring
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: 6e911dc9d0ef42dab9eeffcd632904e0
                  expression: 'last(/MaxDB DBMMonitor/maxdb.common.database_monitoring[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} database monitoring disabled'
                  status: DISABLED
                  priority: INFO
                  description: 'This message informs that databese monitoring mode has been disabled in the database.'
            -
              uuid: 323911f4696747a9b7d5abd1edfafda6
              name: '{#MAXDBNAME} Kernel trace'
              type: DEPENDENT
              key: 'maxdb.common.kernel_trace[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is kernel trace enabled'
              valuemap:
                name: 'MaxDB DBMMonitor switch state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.kernel_trace
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: 2982922c91234ceaac57bd4e6b40b08b
                  expression: 'last(/MaxDB DBMMonitor/maxdb.common.kernel_trace[{#MAXDBNAME}])=0'
                  name: '{#MAXDBNAME} kernel trace disabled'
                  status: DISABLED
                  priority: INFO
                  description: 'This message informs that kernel trace mode has been disabled in the database.'
            -
              uuid: c6f5dbd7de354fdaae29e78fb89ec5ec
              name: '{#MAXDBNAME} DataArea bytes'
              type: DEPENDENT
              key: 'maxdb.data.bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of bytes of data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.data_bytes
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 328d5dc36d4d468d87b1d3bb8d5ddfa5
              name: '{#MAXDBNAME} DataArea is full'
              type: DEPENDENT
              key: 'maxdb.data.full[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is DataArea full'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.database_full
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
              trigger_prototypes:
                -
                  uuid: ed7b0e9b1f3c43939925d6e80d536e16
                  expression: 'last(/MaxDB DBMMonitor/maxdb.data.full[{#MAXDBNAME}])=1'
                  name: '{#MAXDBNAME} DataArea is full'
                  priority: HIGH
                  description: 'This error occurs when the database runs out of free space. For the correct operation of the database, you need to free up some space or create a new DataArea volume.'
            -
              uuid: d7f899b7c3d9452b971c5a0a27cf4984
              name: '{#MAXDBNAME} DataArea MAX bytes'
              type: DEPENDENT
              key: 'maxdb.data.max_bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of maximum possible bytes of data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.data_max_bytes
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 0c3ec0b25af345fd8ec7a8b2f1ab6587
              name: '{#MAXDBNAME} DataArea percentage'
              type: DEPENDENT
              key: 'maxdb.data.percentage[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of used space in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.data_percentage
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 98884d3af2ce465db5892a07b47a9bce
              name: '{#MAXDBNAME} DataArea permanent bytes'
              type: DEPENDENT
              key: 'maxdb.data.perm_bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of bytes of permanent data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.perm_data_bytes
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 9a76893543eb4e67835a06e57576667f
              name: '{#MAXDBNAME} DataArea permanent percentage'
              type: DEPENDENT
              key: 'maxdb.data.perm_percentage[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of used space by permanent data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.perm_data_percentage
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 2d5857afe75d4ab1ab9d68f31186e34a
              name: '{#MAXDBNAME} DataArea temporarily bytes'
              type: DEPENDENT
              key: 'maxdb.data.temp_data_bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of bytes of temporarily data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.temp_data_bytes
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: 1416eec660a04f598afe755f47305eb3
              name: '{#MAXDBNAME} DataArea temporarily percantage'
              type: DEPENDENT
              key: 'maxdb.data.temp_data_percentage[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of used space by temporarily data in DataArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.temp_data_percentage
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
            -
              uuid: a063d522aa7440e8b77c86b00b30a868
              name: '{#MAXDBNAME} DataArea volumes count'
              type: DEPENDENT
              key: 'maxdb.data.volumes_count[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: 180d
              description: 'Number of DataArea volumes'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.data_volumes_count
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info DataArea'
              trigger_prototypes:
                -
                  uuid: 488cf84cd5a440a7bb6c48a51423f2ee
                  expression: '(last(/MaxDB DBMMonitor/maxdb.data.volumes_count[{#MAXDBNAME}],#1)<>last(/MaxDB DBMMonitor/maxdb.data.volumes_count[{#MAXDBNAME}],#2))<>0'
                  name: '{#MAXDBNAME} number of volumes in DataArea was been changed'
                  priority: INFO
                  description: 'This message informs that the number of volumes in DataArea has been changed. Disable this trigger if dynamic DataArea adjustment is enabled.'
            -
              uuid: 6201567d671f4f2aabd6b138ed31669c
              name: '{#MAXDBNAME} get info state data error'
              type: DEPENDENT
              key: 'maxdb.infostate.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting info state data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
            -
              uuid: a2ee2b8651c749748b2696f463c7b2a3
              name: '{#MAXDBNAME} info state data'
              key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <info state>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
            -
              uuid: 632e19c2492a4f289e99b04c9c5006c1
              name: '{#MAXDBNAME} locks collisions'
              type: DEPENDENT
              key: 'maxdb.locks.collisions[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of lock collisions'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_collisions
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 0f3ea3655cd247199ee529b122bfd068
              name: '{#MAXDBNAME} locks entries average used'
              type: DEPENDENT
              key: 'maxdb.locks.entries.avgused[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of average entries used for locks and lock requests'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_average_used_entries
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 7dc53f73da45463aa519516d84e10a55
              name: '{#MAXDBNAME} locks entries MAX'
              type: DEPENDENT
              key: 'maxdb.locks.entries.max[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: 180d
              description: 'Number of entries available for locks and lock requests'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_max_entries
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 6498c38f9e0745fa8e67aba40573d375
              name: '{#MAXDBNAME} get locks info error'
              type: DEPENDENT
              key: 'maxdb.locks.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting locks data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 741d8f106a384c57a39f00574f5168dc
              name: '{#MAXDBNAME} locks escalations'
              type: DEPENDENT
              key: 'maxdb.locks.escalations[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of row locks from which the row locks are converted into table locks (lock escalation)'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_escalations
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 1619e9d4f7524725bd6dc28db4f49fd9
              name: '{#MAXDBNAME} locks request timeout'
              type: DEPENDENT
              key: 'maxdb.locks.requesttimeout[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: s
              description: 'Timeout of locks request'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_request_timeout
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: a83bccb0f2e34018ac71f12b8d368dc0
              name: '{#MAXDBNAME} locks rows'
              type: DEPENDENT
              key: 'maxdb.locks.rows[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of row locks held'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_row_locks
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 30828c434b8d4b50a46ca94ca7bf807f
              name: '{#MAXDBNAME} locks tables'
              type: DEPENDENT
              key: 'maxdb.locks.tables[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of table locks held'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.locks_table_locks
              master_item:
                key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: 3ba42ca512b54bcca5608b6e4ae3a4fd
              name: '{#MAXDBNAME} locks'
              key: 'maxdb.locks[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <info locks>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Locks'
            -
              uuid: ab7e681fef65481f9640ef3ee36a1823
              name: '{#MAXDBNAME} LogArea auto override ON'
              type: DEPENDENT
              key: 'maxdb.log.autooverride[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is override mode ON for LogArea'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_automatic_overwrite
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
              trigger_prototypes:
                -
                  uuid: ea0fb00d1d29464193250a0f8f7000d9
                  expression: 'change(/MaxDB DBMMonitor/maxdb.log.autooverride[{#MAXDBNAME}])<>0'
                  name: '{#MAXDBNAME} LogArea auto override mode changed'
                  priority: INFO
                  description: 'This message informs that the LogArea overwrite mode has been changed.'
            -
              uuid: 52310b56bb00401a9048ae231fa0ef67
              name: '{#MAXDBNAME} LogArea bytes'
              type: DEPENDENT
              key: 'maxdb.log.bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of bytes of data in LogArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_used_size_bytes
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
            -
              uuid: 245e8d01733c4bd481934c9ce88676a0
              name: '{#MAXDBNAME} get log info error'
              type: DEPENDENT
              key: 'maxdb.log.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting log info data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
            -
              uuid: 5d37f15c71e846eeb250b986d47e48ac
              name: '{#MAXDBNAME} LogArea is full'
              type: DEPENDENT
              key: 'maxdb.log.full[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is LogArea full'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_full
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
              trigger_prototypes:
                -
                  uuid: c19562501d4d48ccbc62abf15e837143
                  expression: 'last(/MaxDB DBMMonitor/maxdb.log.full[{#MAXDBNAME}])=1'
                  name: '{#MAXDBNAME} LogArea is full'
                  priority: HIGH
                  description: 'This error occurs when the database runs out of free LogArea space. For the correct operation of the database, you need to backup LogArea or create a new LogAre volume.'
            -
              uuid: 6583f300f4024ccf89f3267089961a83
              name: '{#MAXDBNAME} LogArea MAX bytes'
              type: DEPENDENT
              key: 'maxdb.log.max_bytes[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: bytes
              description: 'Number of maximum possible bytes of data in LogArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_max_size_bytes
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
            -
              uuid: db455caeeb8f4fd6ad30ae149258d519
              name: '{#MAXDBNAME} LogArea is mirrored'
              type: DEPENDENT
              key: 'maxdb.log.mirrored[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is LogArea mirrored'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_mirrored
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
              trigger_prototypes:
                -
                  uuid: 3ed8ac89fadd4137a1331b8993011019
                  expression: 'change(/MaxDB DBMMonitor/maxdb.log.mirrored[{#MAXDBNAME}])<>0'
                  name: '{#MAXDBNAME} LogArea mirror mode changed'
                  priority: INFO
                  description: 'This message informs that the LogArea mirror mode has been changed.'
            -
              uuid: 360aa05600504119a33263caa6178541
              name: '{#MAXDBNAME} LogArea percentage'
              type: DEPENDENT
              key: 'maxdb.log.percentage[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of used space in LogArea'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_used_size_percentage
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
            -
              uuid: 2734216f092842d1add8c13ba9d00204
              name: '{#MAXDBNAME} LogArea is writing'
              type: DEPENDENT
              key: 'maxdb.log.writing[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              description: 'Is LogArea writing'
              valuemap:
                name: 'MaxDB DBMMonitor YN'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.log_writing
              master_item:
                key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
              trigger_prototypes:
                -
                  uuid: 76aa20d1d45c4c9c982f610879a1612d
                  expression: 'change(/MaxDB DBMMonitor/maxdb.log.writing[{#MAXDBNAME}])<>0'
                  name: '{#MAXDBNAME} LogArea writing mode changed'
                  priority: INFO
                  description: 'This message informs that the LogArea writing mode has been changed.'
            -
              uuid: 1ab1b1a9bd744a81bef76010a6de31c8
              name: '{#MAXDBNAME} LogArea info'
              key: 'maxdb.log[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <info log>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info LogArea'
            -
              uuid: 2315e9da77394576832ca2b953869d5d
              name: '{#MAXDBNAME} get parameters difference error'
              type: DEPENDENT
              key: 'maxdb.params.diff.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting parameters difference data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.params.diff[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
            -
              uuid: 34d20afa02b14e3186de3cb01cfc58e4
              name: '{#MAXDBNAME} parameters difference'
              type: DEPENDENT
              key: 'maxdb.params.diff.value[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: '0'
              value_type: TEXT
              description: 'List of changed DB parameters'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.diff
              master_item:
                key: 'maxdb.params.diff[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
              trigger_prototypes:
                -
                  uuid: 3ed248551a2d48ddabb23f62344c5607
                  expression: 'length(last(/MaxDB DBMMonitor/maxdb.params.diff.value[{#MAXDBNAME}]))>0'
                  name: '{#MAXDBNAME} parameters was been changed'
                  priority: INFO
                  description: 'This message informs about the change of one or more database parameters.'
            -
              uuid: 0c79168efaef489b8a33af85cf471f2d
              name: '{#MAXDBNAME} parameters data'
              key: 'maxdb.params.diff[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 15m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'List of changed parameters for command <info params>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Common'
            -
              uuid: 942b3ccd3e614c3289b78b30cb8624c4
              name: '{#MAXDBNAME} get power state error'
              type: DEPENDENT
              key: 'maxdb.power.error[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Error getting power state data'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'maxdb.power[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Power'
              trigger_prototypes:
                -
                  uuid: d914ae71e4cb4de3970fb6e40ade2a5c
                  expression: 'length(last(/MaxDB DBMMonitor/maxdb.power.error[{#MAXDBNAME}]))>1'
                  name: '{#MAXDBNAME} error occurred at getting power state info'
                  priority: HIGH
                  description: 'This error occurs when an exception occurs when the maxdb-dbm-monitor library executes <db_state> command. You need to parse the message and fix the error.'
            -
              uuid: 208b60b4e7f64455b1e4a8ac36342a78
              name: '{#MAXDBNAME} power state'
              type: DEPENDENT
              key: 'maxdb.power.state[{#MAXDBNAME}]'
              delay: '0'
              history: 7d
              trends: 30d
              description: 'DB power state'
              valuemap:
                name: 'MaxDB DBMMonitor power state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.operstate
              master_item:
                key: 'maxdb.power[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Power'
              trigger_prototypes:
                -
                  uuid: 95bc5fb2f8314a82b6a4a2f2909339ed
                  expression: 'nodata(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}],16m)=1'
                  name: 'Cant get {#MAXDBNAME} power state'
                  priority: HIGH
                  description: |
                    This error occurs when the monitoring system cannot get data about the power state of the database for a long time. Possible reasons:
                    - critical database error;
                    - <maxdb-dbm-monitor.jar> library command execution error;
                    - no connection to the server.
                  dependencies:
                    -
                      name: '{#MAXDBNAME} error occurred at getting power state info'
                      expression: 'length(last(/MaxDB DBMMonitor/maxdb.power.error[{#MAXDBNAME}]))>1'
                -
                  uuid: a838a1de4a2244898814ffd7d2a12feb
                  expression: 'last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=2 or last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=3'
                  name: '{#MAXDBNAME} is not ONLINE'
                  priority: INFO
                  description: 'This message informs that databese is up, but not in ONLINE state.'
                -
                  uuid: 8a2957e330c1401a87f2b7680475ffbc
                  expression: 'last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=0 or last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=4'
                  name: '{#MAXDBNAME} is OFFLINE'
                  priority: HIGH
                  description: 'This error occurs when the database is in the state OFFLINE or UNKNOWN.'
            -
              uuid: a0562904357840788b2d17e912b86431
              name: '{#MAXDBNAME} power state data'
              key: 'maxdb.power[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'Data map for command <db_state>'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Power'
            -
              uuid: c03803c210b24e42a60a3bb9bb37dfb0
              name: '{#MAXDBNAME} sessions active'
              type: DEPENDENT
              key: 'maxdb.sessions.active[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              description: 'Number of active sessions'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.sessions
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Sessions'
            -
              uuid: a19bbd1e2b8b4c5e97c56c75fba7519f
              name: '{#MAXDBNAME} sessions active percentage'
              type: DEPENDENT
              key: 'maxdb.sessions.active_percentage[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              units: '%'
              description: 'Percentage of active sessions'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.sessions_percentage
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Sessions'
              trigger_prototypes:
                -
                  uuid: 1aea9db174584e398a841a4cdea8720c
                  expression: 'last(/MaxDB DBMMonitor/maxdb.sessions.active_percentage[{#MAXDBNAME}])=100'
                  name: '{#MAXDBNAME} all sessions are busy'
                  priority: HIGH
                  description: 'This error occurs when the session limit has been reached in the database, which means it is not possible to create a new connection to the database.'
                -
                  uuid: 81076239c7384331964c8c0734e20a77
                  expression: 'last(/MaxDB DBMMonitor/maxdb.sessions.active_percentage[{#MAXDBNAME}])>90'
                  name: '{#MAXDBNAME} few sessions left'
                  priority: WARNING
                  description: 'This message occurs when the number of connections to the database has almost reached the limit. It is necessary to analyze opened database connections.'
                  manual_close: 'YES'
            -
              uuid: 056200e956054bd086711588ba4d299e
              name: '{#MAXDBNAME} sessions MAX'
              type: DEPENDENT
              key: 'maxdb.sessions.max[{#MAXDBNAME}]'
              delay: '0'
              history: 30d
              trends: 180d
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.sessions_max
              master_item:
                key: 'maxdb.infostate[{$MAXDBHOST},{#MAXDBNAME},{$MAXDBUSER},{$MAXDBPASS},{$MAXDBPASSFILE},{$MAXDB_ZMACROS}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB Info Sessions'
          trigger_prototypes:
            -
              uuid: 220098e1bb8c45c0bb9dff2b489b35e1
              expression: 'last(/MaxDB DBMMonitor/maxdb.data.percentage[{#MAXDBNAME}])>90 and (last(/MaxDB DBMMonitor/maxdb.data.max_bytes[{#MAXDBNAME}])-last(/MaxDB DBMMonitor/maxdb.data.bytes[{#MAXDBNAME}]))<{$MAXDB_DA_FREEBYTESLIMIT}'
              name: '{#MAXDBNAME} DataArea few space left'
              priority: WARNING
              description: 'DataArea cells are filled almost to the limit. It is necessary to analyze the increase in the amount of data in the database.'
            -
              uuid: e70361d4f6bf4384a8f2895d7f2af2b7
              expression: 'last(/MaxDB DBMMonitor/maxdb.backup.dat.checkdaily[{#MAXDBNAME}])=1 and last(/MaxDB DBMMonitor/maxdb.backup.dat.enddate[{#MAXDBNAME}])<>date() and last(/MaxDB DBMMonitor/maxdb.backup.dat.checktime[{#MAXDBNAME}])<time()'
              name: '{#MAXDBNAME} DAT daily backup not found'
              priority: WARNING
              description: 'Daily backup process has not been started, or is still in progress.'
            -
              uuid: 7294152d5e4b4d088144a586225d9f46
              expression: 'length(last(/MaxDB DBMMonitor/maxdb.backup.error[{#MAXDBNAME}]))>1 or length(last(/MaxDB DBMMonitor/maxdb.cache.hitrate.error[{#MAXDBNAME}]))>1 or length(last(/MaxDB DBMMonitor/maxdb.infostate.error[{#MAXDBNAME}]))>1 or length(last(/MaxDB DBMMonitor/maxdb.locks.error[{#MAXDBNAME}]))>1 or length(last(/MaxDB DBMMonitor/maxdb.log.error[{#MAXDBNAME}]))>1 or length(last(/MaxDB DBMMonitor/maxdb.params.diff.error[{#MAXDBNAME}]))>1'
              name: '{#MAXDBNAME} error occurred at getting DB info'
              priority: WARNING
              description: 'This error occurs when an exception occurs when the maxdb-dbm-monitor library executes info command. You need to parse the message and fix the error.'
              dependencies:
                -
                  name: 'Cant get {#MAXDBNAME} power state'
                  expression: 'nodata(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}],16m)=1'
                -
                  name: '{#MAXDBNAME} all sessions are busy'
                  expression: 'last(/MaxDB DBMMonitor/maxdb.sessions.active_percentage[{#MAXDBNAME}])=100'
                -
                  name: '{#MAXDBNAME} error occurred at getting power state info'
                  expression: 'length(last(/MaxDB DBMMonitor/maxdb.power.error[{#MAXDBNAME}]))>1'
                -
                  name: '{#MAXDBNAME} is OFFLINE'
                  expression: 'last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=0 or last(/MaxDB DBMMonitor/maxdb.power.state[{#MAXDBNAME}])=4'
            -
              uuid: eed8e65348a44ce2b35d1df34849d13e
              expression: 'last(/MaxDB DBMMonitor/maxdb.backup.log.successful[{#MAXDBNAME}])=0 and last(/MaxDB DBMMonitor/maxdb.log.autooverride[{#MAXDBNAME}])<>1'
              name: '{#MAXDBNAME} last LOG backup failed'
              priority: WARNING
              description: 'This error occurs when the last LogArea backup failed.'
              manual_close: 'YES'
            -
              uuid: b4c99c4a7acd4e7baceef62dc6d8e140
              expression: |
                last(/MaxDB DBMMonitor/maxdb.log.percentage[{#MAXDBNAME}])>90 and (last(/MaxDB DBMMonitor/maxdb.log.max_bytes[{#MAXDBNAME}])-
                
                last(/MaxDB DBMMonitor/maxdb.log.bytes[{#MAXDBNAME}]))<{$MAXDB_LA_FREEBYTESLIMIT}
              name: '{#MAXDBNAME} LogArea few space left'
              priority: WARNING
              description: 'LogArea cells are filled almost to the limit. It is necessary to analyze the increase in the amount of data in the LogArea or run backup task.'
          graph_prototypes:
            -
              uuid: 575baad233e1433c857a551891459176
              name: '{#MAXDBNAME} Cahes hit rate'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: BOLD_LINE
                  color: 2774A4
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.cache.hitrate.catalog[{#MAXDBNAME}]'
                -
                  sortorder: '2'
                  drawtype: BOLD_LINE
                  color: E64A19
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.cache.hitrate.commandexecute[{#MAXDBNAME}]'
                -
                  sortorder: '3'
                  drawtype: BOLD_LINE
                  color: FFC107
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.cache.hitrate.commandprepare[{#MAXDBNAME}]'
                -
                  sortorder: '4'
                  drawtype: BOLD_LINE
                  color: 199C0D
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.cache.hitrate.data[{#MAXDBNAME}]'
                -
                  sortorder: '5'
                  drawtype: BOLD_LINE
                  color: E91E63
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.cache.hitrate.sequence[{#MAXDBNAME}]'
            -
              uuid: d6986dd5ed374f31b527df2bc436cb49
              name: '{#MAXDBNAME} DataArea bytes used'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: FILLED_REGION
                  color: 81C784
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.data.max_bytes[{#MAXDBNAME}]'
                -
                  sortorder: '2'
                  drawtype: FILLED_REGION
                  color: E57373
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.data.bytes[{#MAXDBNAME}]'
            -
              uuid: bbaee372fa5c45c39a67e0f0f70ac6da
              name: '{#MAXDBNAME} Locks'
              graph_items:
                -
                  sortorder: '1'
                  color: 199C0D
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.collisions[{#MAXDBNAME}]'
                -
                  sortorder: '2'
                  color: F63100
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.entries.avgused[{#MAXDBNAME}]'
                -
                  sortorder: '3'
                  color: B0BEC5
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.entries.max[{#MAXDBNAME}]'
                -
                  sortorder: '4'
                  color: F7941D
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.escalations[{#MAXDBNAME}]'
                -
                  sortorder: '5'
                  drawtype: BOLD_LINE
                  color: 0040FF
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.rows[{#MAXDBNAME}]'
                -
                  sortorder: '6'
                  drawtype: BOLD_LINE
                  color: FF0080
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.locks.tables[{#MAXDBNAME}]'
            -
              uuid: 8b7500f4134c47cfb90df26e21fa1fb9
              name: '{#MAXDBNAME} LogArea bytes used'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: FILLED_REGION
                  color: 81C784
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.log.max_bytes[{#MAXDBNAME}]'
                -
                  sortorder: '2'
                  drawtype: FILLED_REGION
                  color: E57373
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.log.bytes[{#MAXDBNAME}]'
            -
              uuid: 2132465f3c0546e792c35cbaed57b3d6
              name: '{#MAXDBNAME} Sessions used'
              ymin_type_1: FIXED
              graph_items:
                -
                  sortorder: '1'
                  drawtype: FILLED_REGION
                  color: '795548'
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.sessions.max[{#MAXDBNAME}]'
                -
                  sortorder: '2'
                  drawtype: FILLED_REGION
                  color: 0277BD
                  item:
                    host: 'MaxDB DBMMonitor'
                    key: 'maxdb.sessions.active[{#MAXDBNAME}]'
        -
          uuid: 39e722f9b75c4d22840e1a06f10b05f7
          name: 'XServer discovery'
          key: 'xserver.discovery[{$MAXDBINIPATH},{$MAXDBEXCLUDEDB},{$MAXDBONLYDB}]'
          delay: 4h
          lifetime: 7d
          description: 'Discover XServer installations'
          item_prototypes:
            -
              uuid: ee9d7dd33ecb4e899163accd9faa9373
              name: '{#XSERVERNAME} data'
              key: 'xserver.data[localhost,{#XSERVERPORT}]'
              delay: 5m
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'XServer status data'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB XServer'
            -
              uuid: ef81224999514513bc377d05521e3b01
              name: '{#XSERVERNAME} error'
              type: DEPENDENT
              key: 'xserver.error[{#XSERVERNAME}]'
              delay: '0'
              history: 7d
              trends: '0'
              value_type: TEXT
              description: 'XServer checker error'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.error
              master_item:
                key: 'xserver.data[localhost,{#XSERVERPORT}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB XServer'
              trigger_prototypes:
                -
                  uuid: b9f7b0af64fb44bc98bf036019699916
                  expression: 'length(last(/MaxDB DBMMonitor/xserver.error[{#XSERVERNAME}]))>1'
                  name: '{#XSERVERNAME} error occurred at getting data'
                  priority: WARNING
                  description: 'This error occurs when an exception occurs in a maxdb-dbm-monitor library call. You need to analyze the message and fix the error.'
            -
              uuid: d12df46fb0b34b45bfa147b3657301e5
              name: '{#XSERVERNAME} availability'
              type: DEPENDENT
              key: 'xserver.state[{#XSERVERNAME},{#XSERVERPORT}]'
              delay: '0'
              history: 30d
              trends: 90d
              description: 'XServer availability'
              valuemap:
                name: 'MaxDB DBMMonitor XServer connection state'
              preprocessing:
                -
                  type: JSONPATH
                  parameters:
                    - $.xserver_state
              master_item:
                key: 'xserver.data[localhost,{#XSERVERPORT}]'
              tags:
                -
                  tag: Application
                  value: 'SAP MaxDB XServer'
              trigger_prototypes:
                -
                  uuid: 15273f48b79e4aff8d1d9cd1dc6db35a
                  expression: 'last(/MaxDB DBMMonitor/xserver.state[{#XSERVERNAME},{#XSERVERPORT}])=0'
                  name: '{#XSERVERNAME} is not available on {#XSERVERPORT}'
                  priority: WARNING
                  description: 'This error occurs when it is not possible to connect to the XServer service.'
      macros:
        -
          macro: '{$MAXDBEXCLUDEDB}'
          description: 'Exclude database name from DB and XServer discovery. Excluded db-names must be separated by comma (f.e. "ADB,BDB").'
        -
          macro: '{$MAXDBHOST}'
          value: localhost
          description: 'Node on which the MaxDB instance is running.'
        -
          macro: '{$MAXDBINIPATH}'
          description: 'ONLY FOR LINUX SYSTEMS! Absolute path to Installations.ini file (for MaxDB and XServer discovery). By default "/sapdb/data/config/Installations.ini".'
        -
          macro: '{$MAXDBONLYDB}'
          description: 'Discover only DB in this list (for DB instances and XServer) discovery. Db-names must be separated by comma (f.e. "ADB,BDB").'
        -
          macro: '{$MAXDBPASS}'
          description: 'Read-access MaxDB instance password.'
        -
          macro: '{$MAXDBPASSFILE}'
          value: 'c:\zabbix\plugins\maxdb\.pass'
          description: 'Absolute path to the file containing authorization data. The file is prioritized. That is, if you specify authentication data both in the macroses {$MAXDBUSER}{$MAXDBPASS} and in the file, data from the file will be used.'
        -
          macro: '{$MAXDBUSER}'
          description: 'Read-access MaxDB instance user.'
        -
          macro: '{$MAXDB_DA_FREEBYTESLIMIT}'
          value: '53687091200'
          description: 'DataArea top filling limit for triggering (by default = 50 Gbytes).'
        -
          macro: '{$MAXDB_LA_FREEBYTESLIMIT}'
          value: '53687091200'
          description: 'LogArea top filling limit for triggering (by default = 50 Gbytes).'
        -
          macro: '{$MAXDB_ZMACROS}'
          value: 'backup_daily_dat_days=12345#backup_daily_dat_time=080000'
          description: 'Custom macros. This value will be returned from node with the DB response.'
      valuemaps:
        -
          uuid: c3c8a83560e640799d1b22f8026697eb
          name: 'MaxDB DBMMonitor backup daily check'
          mappings:
            -
              value: '0'
              newvalue: SKIP
            -
              value: '1'
              newvalue: CHECK
        -
          uuid: 01b8ce780ba04fdb8e6ac6823d78356a
          name: 'MaxDB DBMMonitor backup state'
          mappings:
            -
              value: '0'
              newvalue: UNSUCCESS
            -
              value: '1'
              newvalue: SUCCESS
            -
              value: '2'
              newvalue: NO_DATA
            -
              value: '3'
              newvalue: SKIP
        -
          uuid: 72a51a57c4314d4daf986cab1c7f3527
          name: 'MaxDB DBMMonitor power state'
          mappings:
            -
              value: '0'
              newvalue: OFFLINE
            -
              value: '1'
              newvalue: ONLINE
            -
              value: '2'
              newvalue: ADMIN
            -
              value: '3'
              newvalue: STANDBY
            -
              value: '4'
              newvalue: UNKNOWN
        -
          uuid: 562129719ea244cba9583a4e85f257e8
          name: 'MaxDB DBMMonitor switch state'
          mappings:
            -
              value: '0'
              newvalue: DISABLED
            -
              value: '1'
              newvalue: ENABLED
        -
          uuid: cdf5b87769f54f7e81b564ad998c2aaf
          name: 'MaxDB DBMMonitor XServer connection state'
          mappings:
            -
              value: '0'
              newvalue: 'NOT CONNECTED'
            -
              value: '1'
              newvalue: CONNECTED
            -
              value: '2'
              newvalue: SKIP
        -
          uuid: 762274bd485742caae6e35abee382c70
          name: 'MaxDB DBMMonitor YN'
          mappings:
            -
              value: '0'
              newvalue: 'NO'
            -
              value: '1'
              newvalue: 'YES'
