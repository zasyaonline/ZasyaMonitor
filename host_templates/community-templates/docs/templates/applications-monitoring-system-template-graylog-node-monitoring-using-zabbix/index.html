<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>graylog_nodes</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Applications/Monitoring_System/template_graylog_node_monitoring_using_zabbix">
    <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">graylog_nodes</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:logfiles </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">title:Graylog </a>
					</div>
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_6_0" href="#body">ver. 6.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
    
    
    <div id="content_ver_5_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#applications-monitoring-system-template-graylog-node-monitoring-using-zabbix">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Applications/Monitoring_System/template_graylog_node_monitoring_using_zabbix/5.0/template_graylog_node_monitoring_using_zabbix.xml">Download</a>
      </div>
      
      



<h1 id="graylog-nodes">Graylog: Nodes</h1>

<h2 id="overview">Overview</h2>

<p>Template created to monitor GrayLog nodes through LLD (Low Level Discovery)</p>

<p>We added a feature of Zabbix called LLD (Low Level Discovery) in the model, this automation seeks to facilitate the discovery of the nodes in GrayLog, so that you do not have to register the nodes manually just set the time of the discovery rule.</p>

<h2 id="monitoring-itens">Monitoring Itens:</h2>

<ul>
  <li>GrayLog: Filter execution Time (FIltered, Incomming, Outgoing, Process)</li>
  <li>GrayLog: Internal Log Message (Error, Fatal, Trace, Warn)</li>
  <li>GrayLog: Journal ( Journal Size)</li>
  <li>GrayLog: Node Memory(LLD)/( Free Memory, Max Memory, Total Memory, Used Memory)</li>
  <li>GrayLog: Node Status (Lifecycle, Processing, Status )</li>
  <li>GrayLog: Services</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Zabbix 3.4;</li>
  <li>Graylog 2.4;</li>
  <li>Zabbix Agent install on Graylog;</li>
  <li>Python 3.4 or &gt; Python3;</li>
  <li>Imports;
    <ul>
      <li>import requests;</li>
      <li>import json;</li>
      <li>import sys</li>
    </ul>
  </li>
</ul>

<h2 id="author">Author</h2>

<p>Beza</p>

<h2 id="macros-used">Macros used</h2>

<p>There are no macros links in this template.</p>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery Node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.discovery.node&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GrayLog: Filter execution Time(Outgoing Message) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.outgoingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Processes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>proc.num[graylog-server,,]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(FIltered OutMessages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.filteredOutMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Incoming Messages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.incomingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Fatal 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.fatal,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Process Time) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.processTime,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Trace 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.trace,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Error 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.error,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Warn 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.warn,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Service Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>net.tcp.port[{HOST.IP},9000]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog Journal Size</td>
      <td>&lt;p&gt;The Graylog journal is the component sitting in front of all message processing that writes all incoming messages to disk. Graylog then reads messages from this journal to parse, process, and store them.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.journal.size[org.graylog2.journal.entries-uncommitted,value]&lt;p&gt;Update: 5m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Processing</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},is_processing]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lb_status]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Lifecycle</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lifecycle]&lt;p&gt;Update: 30s&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#NODEID},GrayLog: Memory Used (%)(Total/Max)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>graylog.men.free[{#NODEID}]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Free Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},free_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Max Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},max_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Total Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},total_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Used Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},used_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>


    </div>
    
    
    <div id="content_ver_6_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#applications-monitoring-system-template-graylog-node-monitoring-using-zabbix">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Applications/Monitoring_System/template_graylog_node_monitoring_using_zabbix/6.0/template_graylog_node_monitoring_using_zabbix.yaml">Download</a>
      </div>
      
      



<h1 id="graylog-nodes">Graylog: Nodes</h1>

<h2 id="overview">Overview</h2>

<p>Template created to monitor GrayLog nodes through LLD (Low Level Discovery)</p>

<p>We added a feature of Zabbix called LLD (Low Level Discovery) in the model, this automation seeks to facilitate the discovery of the nodes in GrayLog, so that you do not have to register the nodes manually just set the time of the discovery rule.</p>

<h2 id="monitoring-itens">Monitoring Itens:</h2>

<ul>
  <li>GrayLog: Filter execution Time (FIltered, Incomming, Outgoing, Process)</li>
  <li>GrayLog: Internal Log Message (Error, Fatal, Trace, Warn)</li>
  <li>GrayLog: Journal ( Journal Size)</li>
  <li>GrayLog: Node Memory(LLD)/( Free Memory, Max Memory, Total Memory, Used Memory)</li>
  <li>GrayLog: Node Status (Lifecycle, Processing, Status )</li>
  <li>GrayLog: Services</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Zabbix 3.4;</li>
  <li>Graylog 2.4;</li>
  <li>Zabbix Agent install on Graylog;</li>
  <li>Python 3.4 or &gt; Python3;</li>
  <li>Imports;
    <ul>
      <li>import requests;</li>
      <li>import json;</li>
      <li>import sys</li>
    </ul>
  </li>
</ul>

<h2 id="author">Author</h2>

<p>Beza</p>

<h2 id="macros-used">Macros used</h2>

<p>There are no macros links in this template.</p>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery Node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.discovery.node&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GrayLog: Internal Log Message Fatal 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.fatal,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Process Time) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.processTime,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog Journal Size</td>
      <td>&lt;p&gt;The Graylog journal is the component sitting in front of all message processing that writes all incoming messages to disk. Graylog then reads messages from this journal to parse, process, and store them.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.journal.size[org.graylog2.journal.entries-uncommitted,value]&lt;p&gt;Update: 5m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Incoming Messages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.incomingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Outgoing Message) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.outgoingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Service Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>net.tcp.port[{HOST.IP},9000]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Error 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.error,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(FIltered OutMessages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.filteredOutMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Warn 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.warn,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Processes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>proc.num[graylog-server,,]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Trace 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.trace,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Processing</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},is_processing]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lb_status]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Lifecycle</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lifecycle]&lt;p&gt;Update: 30s&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#NODEID},GrayLog: Memory Used (%)(Total/Max)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>graylog.men.free[{#NODEID}]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Free Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},free_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Max Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},max_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Total Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},total_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Used Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},used_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>


    </div>
    
    
    <div id="content_ver_5_4" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#applications-monitoring-system-template-graylog-node-monitoring-using-zabbix">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Applications/Monitoring_System/template_graylog_node_monitoring_using_zabbix/5.4/template_graylog_node_monitoring_using_zabbix.yaml">Download</a>
      </div>
      
      



<h1 id="graylog-nodes">Graylog: Nodes</h1>

<h2 id="overview">Overview</h2>

<p>Template created to monitor GrayLog nodes through LLD (Low Level Discovery)</p>

<p>We added a feature of Zabbix called LLD (Low Level Discovery) in the model, this automation seeks to facilitate the discovery of the nodes in GrayLog, so that you do not have to register the nodes manually just set the time of the discovery rule.</p>

<h2 id="monitoring-itens">Monitoring Itens:</h2>

<ul>
  <li>GrayLog: Filter execution Time (FIltered, Incomming, Outgoing, Process)</li>
  <li>GrayLog: Internal Log Message (Error, Fatal, Trace, Warn)</li>
  <li>GrayLog: Journal ( Journal Size)</li>
  <li>GrayLog: Node Memory(LLD)/( Free Memory, Max Memory, Total Memory, Used Memory)</li>
  <li>GrayLog: Node Status (Lifecycle, Processing, Status )</li>
  <li>GrayLog: Services</li>
</ul>

<h2 id="requirements">Requirements</h2>

<ul>
  <li>Zabbix 3.4;</li>
  <li>Graylog 2.4;</li>
  <li>Zabbix Agent install on Graylog;</li>
  <li>Python 3.4 or &gt; Python3;</li>
  <li>Imports;
    <ul>
      <li>import requests;</li>
      <li>import json;</li>
      <li>import sys</li>
    </ul>
  </li>
</ul>

<h2 id="author">Author</h2>

<p>Beza</p>

<h2 id="macros-used">Macros used</h2>

<p>There are no macros links in this template.</p>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery Node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.discovery.node&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>GrayLog: Internal Log Message Fatal 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.fatal,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Process Time) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.processTime,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog Journal Size</td>
      <td>&lt;p&gt;The Graylog journal is the component sitting in front of all message processing that writes all incoming messages to disk. Graylog then reads messages from this journal to parse, process, and store them.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.journal.size[org.graylog2.journal.entries-uncommitted,value]&lt;p&gt;Update: 5m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Incoming Messages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.incomingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(Outgoing Message) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.outgoingMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Service Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>net.tcp.port[{HOST.IP},9000]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Error 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.error,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Filter execution Time(FIltered OutMessages) 5min</td>
      <td>&lt;p&gt;A common problem that can hit performance or bring message processing to a halt completely is when someone configures a regular expression or other rule that is too CPU expensive or simply never finishes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.proc.buffer[ProcessBufferProcessor.filteredOutMessages,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Warn 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.warn,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Processes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>proc.num[graylog-server,,]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Internal Log Message Trace 5 min</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.inter.log[org.apache.logging.log4j.core.Appender.trace,m5_rate]&lt;p&gt;Update: 3m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Processing</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},is_processing]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Status</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lb_status]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Graylog: Node Lifecycle</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.cluster.status[{#NODEID},lifecycle]&lt;p&gt;Update: 30s&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#NODEID},GrayLog: Memory Used (%)(Total/Max)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>graylog.men.free[{#NODEID}]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Free Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},free_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Max Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},max_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Total Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},total_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>GrayLog: Node Used Memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>graylog.node.men[{#NODEID},used_memory]&lt;p&gt;Update: 3m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>


    </div>
    
  </div>
  <script>
    (function () {
      
      //console.log('#content_ver_5_4');
      //console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

      
      $('#ver_5_0').click(function () {
        //console.log('#content_ver_5_0');
        //console.log('#ver_5_0');
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
      })
      
      $('#ver_6_0').click(function () {
        //console.log('#content_ver_6_0');
        //console.log('#ver_6_0');
        $('.readme').hide();
        $('#content_ver_6_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_6_0').addClass('active');
      })
      
      $('#ver_5_4').click(function () {
        //console.log('#content_ver_5_4');
        //console.log('#ver_5_4');
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
      })
      
    })();
  </script>
</body>

</html>