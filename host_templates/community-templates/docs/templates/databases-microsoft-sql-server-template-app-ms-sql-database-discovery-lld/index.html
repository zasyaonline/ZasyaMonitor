<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>App MS SQL DB Discovery</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Databases/Microsoft_SQL_Server/template_app_ms_sql_database_discovery_(lld)">
    <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">App MS SQL DB Discovery</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:databases </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">title:Microsoft SQL </a>
					</div>
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_6_0" href="#body">ver. 6.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
    
    
    <div id="content_ver_5_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#databases-microsoft-sql-server-template-app-ms-sql-database-discovery-lld">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Databases/Microsoft_SQL_Server/template_app_ms_sql_database_discovery_(lld)/5.0/template_app_ms_sql_database_discovery_(lld).xml">Download</a>
      </div>
      
      



<h1 id="template-app-ms-sql-db-discovery">Template App MS SQL DB Discovery</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">SQLServer</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MS SQL DB Discovery</td>
      <td>&lt;p&gt;Discovers databases within a single instance specified in a Powershell script.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>windowsdb.discovery&lt;p&gt;Update: 300&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Active Transactions</td>
      <td>&lt;p&gt;Number of active transactions for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Active Transactions”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Write Time (ms)</td>
      <td>&lt;p&gt;Time in milliseconds for performing writes of log flushes that were completed in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Write Time (ms)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions started for the database per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Tracked transactions/sec</td>
      <td>&lt;p&gt;Number of committed transactions recorded in the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Tracked transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Shrink Data Movement Bytes/sec</td>
      <td>&lt;p&gt;Amount of data being moved per second by autoshrink operations, or DBCC SHRINKDATABASE or DBCC SHRINKFILE statements.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Shrink Data Movement Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Trans. Rate</td>
      <td>&lt;p&gt;Number of transactions per second read out of the transaction log of the publication database and delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Trans. Rate”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Pending Xacts</td>
      <td>&lt;p&gt;Number of transactions in the transaction log of the publication database marked for replication, but not yet delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Pending Xacts”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Percent Log Used”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Truncations</td>
      <td>&lt;p&gt;The number of times the transaction log has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Truncations”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Shrinks”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Requests/sec</td>
      <td>&lt;p&gt;The number of log-block requests processed by the log pool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Requests/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Disk Reads/sec</td>
      <td>&lt;p&gt;Number of disk reads that the log pool issued to fetch log blocks.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Disk Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Cache Misses/sec</td>
      <td>&lt;p&gt;Number of requests for which the log block was not available in the log pool. The log pool is an in-memory cache of the transaction log. This cache is used to optimize reading the log for recovery, transaction replication, rollback, and AlwaysOn Availability Groups.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Cache Misses/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Growths”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time (in milliseconds) to flush the log. On an AlwaysOn secondary database, this value indicates the wait time for log records to be hardened to disk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Wait Time”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Rows/sec</td>
      <td>&lt;p&gt;Number of rows bulk copied per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Rows/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;Number of commits per second waiting for the log flush.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Waits/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flushes/sec</td>
      <td>&lt;p&gt;Number of log flushes per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flushes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Used Size (KB)</td>
      <td>&lt;p&gt;The cumulative used size of all the log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Used Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the transaction log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Reads/sec</td>
      <td>&lt;p&gt;Reads performed per second through the log manager cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Hit Ratio</td>
      <td>&lt;p&gt;Percentage of log cache reads satisfied from the log cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Hit Ratio”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Bytes Flushed/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Bytes Flushed/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Group Commit Time/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Group Commit Time/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} DBCC Logical Scan Bytes/sec</td>
      <td>&lt;p&gt;Number of logical read scan bytes per second for database console commands (DBCC).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\DBCC Logical Scan Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Data File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the data files in the database including any automatic growth. Monitoring this counter is useful, for example, for determining the correct size of tempdb.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Data File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Commit Table Entries</td>
      <td>&lt;p&gt;The size of the in-memory portion of the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Commit Table Entries”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Throughput/sec</td>
      <td>&lt;p&gt;Amount of data bulk copied (in kilobytes) per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Throughput/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Write Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions that wrote to the database and committed, in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Write Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300].last()}&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Waits/sec (LLD)</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time (LLD)</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300].avg(600)}&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used (LLD)</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Template App MS SQL DB Discovery:perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300].last()}&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
  </tbody>
</table>


    </div>
    
    
    <div id="content_ver_6_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#databases-microsoft-sql-server-template-app-ms-sql-database-discovery-lld">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Databases/Microsoft_SQL_Server/template_app_ms_sql_database_discovery_(lld)/6.0/template_app_ms_sql_database_discovery_(lld).yaml">Download</a>
      </div>
      
      



<h1 id="template-app-ms-sql-db-discovery">Template App MS SQL DB Discovery</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">SQLServer</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MS SQL DB Discovery</td>
      <td>&lt;p&gt;Discovers databases within a single instance specified in a Powershell script.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>windowsdb.discovery&lt;p&gt;Update: 300&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Active Transactions</td>
      <td>&lt;p&gt;Number of active transactions for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Active Transactions”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Write Time (ms)</td>
      <td>&lt;p&gt;Time in milliseconds for performing writes of log flushes that were completed in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Write Time (ms)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions started for the database per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Tracked transactions/sec</td>
      <td>&lt;p&gt;Number of committed transactions recorded in the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Tracked transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Shrink Data Movement Bytes/sec</td>
      <td>&lt;p&gt;Amount of data being moved per second by autoshrink operations, or DBCC SHRINKDATABASE or DBCC SHRINKFILE statements.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Shrink Data Movement Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Trans. Rate</td>
      <td>&lt;p&gt;Number of transactions per second read out of the transaction log of the publication database and delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Trans. Rate”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Pending Xacts</td>
      <td>&lt;p&gt;Number of transactions in the transaction log of the publication database marked for replication, but not yet delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Pending Xacts”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Percent Log Used”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Truncations</td>
      <td>&lt;p&gt;The number of times the transaction log has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Truncations”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Shrinks”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Requests/sec</td>
      <td>&lt;p&gt;The number of log-block requests processed by the log pool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Requests/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Disk Reads/sec</td>
      <td>&lt;p&gt;Number of disk reads that the log pool issued to fetch log blocks.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Disk Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Cache Misses/sec</td>
      <td>&lt;p&gt;Number of requests for which the log block was not available in the log pool. The log pool is an in-memory cache of the transaction log. This cache is used to optimize reading the log for recovery, transaction replication, rollback, and AlwaysOn Availability Groups.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Cache Misses/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Growths”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time (in milliseconds) to flush the log. On an AlwaysOn secondary database, this value indicates the wait time for log records to be hardened to disk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Wait Time”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Rows/sec</td>
      <td>&lt;p&gt;Number of rows bulk copied per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Rows/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;Number of commits per second waiting for the log flush.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Waits/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flushes/sec</td>
      <td>&lt;p&gt;Number of log flushes per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flushes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Used Size (KB)</td>
      <td>&lt;p&gt;The cumulative used size of all the log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Used Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the transaction log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Reads/sec</td>
      <td>&lt;p&gt;Reads performed per second through the log manager cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Hit Ratio</td>
      <td>&lt;p&gt;Percentage of log cache reads satisfied from the log cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Hit Ratio”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Bytes Flushed/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Bytes Flushed/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Group Commit Time/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Group Commit Time/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} DBCC Logical Scan Bytes/sec</td>
      <td>&lt;p&gt;Number of logical read scan bytes per second for database console commands (DBCC).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\DBCC Logical Scan Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Data File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the data files in the database including any automatic growth. Monitoring this counter is useful, for example, for determining the correct size of tempdb.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Data File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Commit Table Entries</td>
      <td>&lt;p&gt;The size of the in-memory portion of the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Commit Table Entries”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Throughput/sec</td>
      <td>&lt;p&gt;Amount of data bulk copied (in kilobytes) per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Throughput/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Write Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions that wrote to the database and committed, in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Write Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300])&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Waits/sec (LLD)</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time (LLD)</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used (LLD)</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300])&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
  </tbody>
</table>


    </div>
    
    
    <div id="content_ver_5_4" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#databases-microsoft-sql-server-template-app-ms-sql-database-discovery-lld">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Databases/Microsoft_SQL_Server/template_app_ms_sql_database_discovery_(lld)/5.4/template_app_ms_sql_database_discovery_(lld).yaml">Download</a>
      </div>
      
      



<h1 id="template-app-ms-sql-db-discovery">Template App MS SQL DB Discovery</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">SQLServer</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MS SQL DB Discovery</td>
      <td>&lt;p&gt;Discovers databases within a single instance specified in a Powershell script.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>windowsdb.discovery&lt;p&gt;Update: 300&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Active Transactions</td>
      <td>&lt;p&gt;Number of active transactions for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Active Transactions”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Write Time (ms)</td>
      <td>&lt;p&gt;Time in milliseconds for performing writes of log flushes that were completed in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Write Time (ms)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions started for the database per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Tracked transactions/sec</td>
      <td>&lt;p&gt;Number of committed transactions recorded in the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Tracked transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Shrink Data Movement Bytes/sec</td>
      <td>&lt;p&gt;Amount of data being moved per second by autoshrink operations, or DBCC SHRINKDATABASE or DBCC SHRINKFILE statements.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Shrink Data Movement Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Trans. Rate</td>
      <td>&lt;p&gt;Number of transactions per second read out of the transaction log of the publication database and delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Trans. Rate”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Repl. Pending Xacts</td>
      <td>&lt;p&gt;Number of transactions in the transaction log of the publication database marked for replication, but not yet delivered to the distribution database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Repl. Pending Xacts”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Percent Log Used”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Truncations</td>
      <td>&lt;p&gt;The number of times the transaction log has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Truncations”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Shrinks”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Requests/sec</td>
      <td>&lt;p&gt;The number of log-block requests processed by the log pool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Requests/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Disk Reads/sec</td>
      <td>&lt;p&gt;Number of disk reads that the log pool issued to fetch log blocks.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Disk Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Pool Cache Misses/sec</td>
      <td>&lt;p&gt;Number of requests for which the log block was not available in the log pool. The log pool is an in-memory cache of the transaction log. This cache is used to optimize reading the log for recovery, transaction replication, rollback, and AlwaysOn Availability Groups.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Pool Cache Misses/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Growths”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time (in milliseconds) to flush the log. On an AlwaysOn secondary database, this value indicates the wait time for log records to be hardened to disk.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Wait Time”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Rows/sec</td>
      <td>&lt;p&gt;Number of rows bulk copied per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Rows/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;Number of commits per second waiting for the log flush.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flush Waits/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Flushes/sec</td>
      <td>&lt;p&gt;Number of log flushes per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Flushes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Used Size (KB)</td>
      <td>&lt;p&gt;The cumulative used size of all the log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Used Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the transaction log files in the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Reads/sec</td>
      <td>&lt;p&gt;Reads performed per second through the log manager cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Reads/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Cache Hit Ratio</td>
      <td>&lt;p&gt;Percentage of log cache reads satisfied from the log cache.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Cache Hit Ratio”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Log Bytes Flushed/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Log Bytes Flushed/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Group Commit Time/sec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Group Commit Time/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} DBCC Logical Scan Bytes/sec</td>
      <td>&lt;p&gt;Number of logical read scan bytes per second for database console commands (DBCC).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\DBCC Logical Scan Bytes/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Data File(s) Size (KB)</td>
      <td>&lt;p&gt;Cumulative size (in kilobytes) of all the data files in the database including any automatic growth. Monitoring this counter is useful, for example, for determining the correct size of tempdb.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Data File(s) Size (KB)”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Commit Table Entries</td>
      <td>&lt;p&gt;The size of the in-memory portion of the commit table for the database.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Commit Table Entries”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Bulk Copy Throughput/sec</td>
      <td>&lt;p&gt;Amount of data bulk copied (in kilobytes) per second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Bulk Copy Throughput/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{$INSTANCE01} Databases {#DBS} Write Transactions/sec</td>
      <td>&lt;p&gt;Number of transactions that wrote to the database and committed, in the last second.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent</code></td>
      <td>perf_counter[”{$INSTANCE01}:Databases({#DBS})\Write Transactions/sec”,300]&lt;p&gt;Update: 30&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{#DBS} Log Flush Waits/sec</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300])&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Waits/sec (LLD)</td>
      <td>&lt;p&gt;The number of times per second that SQL Server must wait for pages to be written to the transaction log.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Waits/sec”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Flush Wait Time (LLD)</td>
      <td>&lt;p&gt;Total wait time, in milliseconds, to write all transaction log pages.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Flush Wait Time”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Growths (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been expanded. Each time the transaction log grows, all user activity must halt until the log growth completes. Therefore, you want log growths to occur during predefined maintenance windows rather than during general working hours&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Growths”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Log Shrinks (LLD)</td>
      <td>&lt;p&gt;Total number of times the transaction log for the database has been shrunk.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: avg(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Log Shrinks”,300],600s)&gt;0.1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DBS} Percent Log Used (LLD)</td>
      <td>&lt;p&gt;Percentage of space in the log that is in use. Since all work in an OLTP database stops until writes can occur to the transaction log, it’s a very good idea to ensure that the log never fills completely. Hence, the recommendation to keep the log under 80% full.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Template App MS SQL DB Discovery/perf_counter[” SQLServer:Databases({#DBS}) Percent Log Used”,300])&gt;80&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
  </tbody>
</table>


    </div>
    
  </div>
  <script>
    (function () {
      
      //console.log('#content_ver_5_4');
      //console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

      
      $('#ver_5_0').click(function () {
        //console.log('#content_ver_5_0');
        //console.log('#ver_5_0');
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
      })
      
      $('#ver_6_0').click(function () {
        //console.log('#content_ver_6_0');
        //console.log('#ver_6_0');
        $('.readme').hide();
        $('#content_ver_6_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_6_0').addClass('active');
      })
      
      $('#ver_5_4').click(function () {
        //console.log('#content_ver_5_4');
        //console.log('#ver_5_4');
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
      })
      
    })();
  </script>
</body>

</html>