<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>ZFS on Linux</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Operating_Systems/Linux/template_zfs_on_linux">
    <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">ZFS on Linux</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:os </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:servers </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:infrastructure </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:agents </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">title:Linux </a>
					</div>
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_6_0" href="#body">ver. 6.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
    
    
    <div id="content_ver_5_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#operating-systems-linux-template-zfs-on-linux">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Operating_Systems/Linux/template_zfs_on_linux/5.0/template_zfs_on_linux.xml">Download</a>
      </div>
      
      



<h1 id="zfs-on-linux">ZFS on Linux</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$ZFS_ARC_META_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">95</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">85</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zfs Dataset discovery</td>
      <td>&lt;p&gt;Discover ZFS dataset. Dataset names must contain a “/” else it’s a zpool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.fileset.discovery&lt;p&gt;Update: 30m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs Pool discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.pool.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs vdev discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ZFS on Linux version</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/sys/module/zfs/version]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_dnode_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;arc_meta_used = hdr_size + metadata_size + dbuf_size + dnode_size + bonus_size&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_used]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[bonus_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC max size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_max]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC minimum size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_min]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[data_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dbuf_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dnode_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hdr_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC Cache Hit Ratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_hit_ratio&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[metadata_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[misses]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC current size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC total read</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_total_read&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_dnode_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_meta_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 compressratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.compressratio[{#FILESETNAME}]&lt;p&gt;Update: 30m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},referenced]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbychildren]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbydataset]&lt;p&gt;Update: 1h&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbysnapshots]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME}: Get iostats</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/proc/spl/kstat/zfs/{#POOLNAME}/io]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} available</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} used</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} Health</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.health[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} scrub status</td>
      <td>&lt;p&gt;Detect if the pool is currently scrubbing itself. This is not a bad thing itself, but it slows down the entire pool and should be terminated when on production server during business hours if it causes a noticeable slowdown.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.scrub[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} read throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nread[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} write throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nwritten[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: reads</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.reads[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: writes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.writes[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: CHECKSUM error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.cksum[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: READ error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.read[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: WRITE error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.write[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: total number of errors</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.vdev.error_total[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.scrub[{#POOLNAME}].max(12h)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.scrub[{#POOLNAME}].max(24h)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.health[{#POOLNAME}].str(ONLINE)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME}</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.vdev.error_total[{#VDEV}].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#FILESETNAME},used].last()} ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} / ( {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},available].last()} + {ZFS on Linux:zfs.get.fsinfo[{#POOLNAME},used].last()} ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.scrub[{#POOLNAME}].max(12h)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.scrub[{#POOLNAME}].max(24h)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.zpool.health[{#POOLNAME}].str(ONLINE)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {ZFS on Linux:zfs.vdev.error_total[{#VDEV}].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
  </tbody>
</table>


    </div>
    
    
    <div id="content_ver_6_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#operating-systems-linux-template-zfs-on-linux">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Operating_Systems/Linux/template_zfs_on_linux/6.0/template_zfs_on_linux.yaml">Download</a>
      </div>
      
      



<h1 id="zfs-on-linux">ZFS on Linux</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$ZFS_ARC_META_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">95</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">85</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zfs Dataset discovery</td>
      <td>&lt;p&gt;Discover ZFS dataset. Dataset names must contain a “/” else it’s a zpool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.fileset.discovery&lt;p&gt;Update: 30m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs Pool discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.pool.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs vdev discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ZFS on Linux version</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/sys/module/zfs/version]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[metadata_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_dnode_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC current size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC total read</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_total_read&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC Cache Hit Ratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_hit_ratio&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[misses]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dbuf_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[data_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC minimum size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_min]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC max size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_max]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[bonus_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;arc_meta_used = hdr_size + metadata_size + dbuf_size + dnode_size + bonus_size&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_used]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_meta_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_dnode_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hdr_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dnode_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 compressratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.compressratio[{#FILESETNAME}]&lt;p&gt;Update: 30m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},referenced]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbychildren]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbydataset]&lt;p&gt;Update: 1h&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbysnapshots]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME}: Get iostats</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/proc/spl/kstat/zfs/{#POOLNAME}/io]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} available</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} used</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} Health</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.health[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} scrub status</td>
      <td>&lt;p&gt;Detect if the pool is currently scrubbing itself. This is not a bad thing itself, but it slows down the entire pool and should be terminated when on production server during business hours if it causes a noticeable slowdown.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.scrub[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} read throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nread[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} write throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nwritten[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: reads</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.reads[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: writes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.writes[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: CHECKSUM error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.cksum[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: READ error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.read[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: WRITE error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.write[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: total number of errors</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.vdev.error_total[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],12h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],24h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/ZFS on Linux/zfs.zpool.health[{#POOLNAME}],,”like”,”ONLINE”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME}</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/ZFS on Linux/zfs.vdev.error_total[{#VDEV}])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],12h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],24h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/ZFS on Linux/zfs.zpool.health[{#POOLNAME}],,”like”,”ONLINE”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/ZFS on Linux/zfs.vdev.error_total[{#VDEV}])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
  </tbody>
</table>


    </div>
    
    
    <div id="content_ver_5_4" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#operating-systems-linux-template-zfs-on-linux">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Operating_Systems/Linux/template_zfs_on_linux/5.4/template_zfs_on_linux.yaml">Download</a>
      </div>
      
      



<h1 id="zfs-on-linux">ZFS on Linux</h1>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$ZFS_ARC_META_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZFS_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">95</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_AVERAGE_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">85</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_DISASTER_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">99</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$ZPOOL_HIGH_ALERT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Zfs Dataset discovery</td>
      <td>&lt;p&gt;Discover ZFS dataset. Dataset names must contain a “/” else it’s a zpool.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.fileset.discovery&lt;p&gt;Update: 30m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs Pool discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.pool.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs vdev discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.discovery&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>ZFS on Linux version</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/sys/module/zfs/version]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[metadata_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_dnode_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC current size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC total read</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_total_read&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC Cache Hit Ratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.arcstats_hit_ratio&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mru_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[misses]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dbuf_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[data_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC minimum size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_min]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC max size</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[c_max]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[bonus_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;arc_meta_used = hdr_size + metadata_size + dbuf_size + dnode_size + bonus_size&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_used]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_meta_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS parameter $1</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.param[zfs_arc_meta_limit_percent]&lt;p&gt;Update: 1h&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[mfu_hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hits]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[arc_dnode_limit]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[hdr_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>ZFS ARC stat “$1”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.arcstats[dnode_size]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 compressratio</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.compressratio[{#FILESETNAME}]&lt;p&gt;Update: 30m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},referenced]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbychildren]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbydataset]&lt;p&gt;Update: 1h&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},usedbysnapshots]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zfs dataset $1 $2</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#FILESETNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME}: Get iostats</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>vfs.file.contents[/proc/spl/kstat/zfs/{#POOLNAME}/io]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} available</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},available]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} used</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.get.fsinfo[{#POOLNAME},used]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} Health</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.health[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} scrub status</td>
      <td>&lt;p&gt;Detect if the pool is currently scrubbing itself. This is not a bad thing itself, but it slows down the entire pool and should be terminated when on production server during business hours if it causes a noticeable slowdown.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.zpool.scrub[{#POOLNAME}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} read throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nread[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} write throughput</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.nwritten[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: reads</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.reads[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} IOPS: writes</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>zfs.zpool.iostat.writes[{#POOLNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: CHECKSUM error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.cksum[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: READ error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.read[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: WRITE error counter</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code></td>
      <td>zfs.vdev.error_counter.write[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>vdev {#VDEV}: total number of errors</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>zfs.vdev.error_total[{#VDEV}]&lt;p&gt;Update: 5m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],12h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],24h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/ZFS on Linux/zfs.zpool.health[{#POOLNAME}],,”like”,”ONLINE”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME}</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/ZFS on Linux/zfs.vdev.error_total[{#VDEV}])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZFS_AVERAGE_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZFS_DISASTER_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZFS_HIGH_ALERT}% used on dataset {#FILESETNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#FILESETNAME},used]) ) ) &gt; (95/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_AVERAGE_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (85/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_DISASTER_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (99/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>disaster</td>
    </tr>
    <tr>
      <td>More than {$ZPOOL_HIGH_ALERT}% used on zpool {#POOLNAME} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) / ( last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},available]) + last(/ZFS on Linux/zfs.get.fsinfo[{#POOLNAME},used]) ) ) &gt; (90/100)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 12h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],12h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is scrubbing for more than 24h on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: max(/ZFS on Linux/zfs.zpool.scrub[{#POOLNAME}],24h)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>Zpool {#POOLNAME} is {ITEM.VALUE} on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/ZFS on Linux/zfs.zpool.health[{#POOLNAME}],,”like”,”ONLINE”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>vdev {#VDEV} has encountered {ITEM.VALUE} errors on {HOST.NAME} (LLD)</td>
      <td>&lt;p&gt;This device has experienced an unrecoverable error. Determine if the device needs to be replaced. If yes, use ‘zpool replace’ to replace the device. If not, clear the error with ‘zpool clear’. You may also run a zpool scrub to check if some other undetected errors are present on this vdev.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/ZFS on Linux/zfs.vdev.error_total[{#VDEV}])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>high</td>
    </tr>
  </tbody>
</table>


    </div>
    
  </div>
  <script>
    (function () {
      
      //console.log('#content_ver_5_4');
      //console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

      
      $('#ver_5_0').click(function () {
        //console.log('#content_ver_5_0');
        //console.log('#ver_5_0');
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
      })
      
      $('#ver_6_0').click(function () {
        //console.log('#content_ver_6_0');
        //console.log('#ver_6_0');
        $('.readme').hide();
        $('#content_ver_6_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_6_0').addClass('active');
      })
      
      $('#ver_5_4').click(function () {
        //console.log('#content_ver_5_4');
        //console.log('#ver_5_4');
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
      })
      
    })();
  </script>
</body>

</html>