<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Template Synology HyperBackup</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Storage_Devices/Synology/template_synology_hyperbackup_using_lld">
    <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">Template Synology HyperBackup</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_6_0" href="#body">ver. 6.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
    
    
    <div id="content_ver_6_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#storage-devices-synology-template-synology-hyperbackup-using-lld">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Storage_Devices/Synology/template_synology_hyperbackup_using_lld/6.0/template_synology_hyperbackup_using_lld.yaml">Download</a>
      </div>
      
      



<h1 id="template-hyperbackup">Template Hyperbackup</h1>

<h2 id="description">Description</h2>
<p>Attention: TESTED only on 5.4.x. Please give me info if it works correctly on 5.0 too.</p>

<p>Template to monitor Synology Hyperbackup status.</p>

<p>Create a zabbix user in your DSM. The user should be in the administrator group as it must be able to ssh to the DSM. You can disable access to all folders and to all programs/functions.
Login on DSM with administrative/root account and create /etc/sudoers.d/zabbix with this inside:
zabbix ALL = NOPASSWD: /bin/more /var/log/messages, /bin/grep
This tells the system that the user zabbix can run as root only this 2 commands without the root password.</p>

<p>Assign the template to the synology.
Pay attention to: the template uses the Dns name of the synology to do the discovery and other stuff.</p>

<p>In the assigned machine you must define two macros:
{$SSH_USERNAME}
{$SSH_PASSWORD}</p>

<h2 id="overview">Overview</h2>
<p>with this template you can monitor the status of the Hyperbackup on your synology with zabbix.</p>

<h3 id="features">Features</h3>

<p>The template comes with a discovery rule to get all configured backup on the NAS.</p>

<ol>
  <li>The template gives you 3 items:
    <ul>
      <li>The time of the last backup</li>
      <li>How much time the last backup has lasted</li>
      <li>The result</li>
    </ul>
  </li>
  <li>The template comes with one trigger:
    <ul>
      <li>If the status of the last backup is not ok, it will fire.</li>
    </ul>
  </li>
</ol>

<h3 id="environment">Environment</h3>

<p>Tested on Zabbix version 5.4.1</p>
<ul>
  <li>on docker</li>
</ul>

<h3 id="notes">Note(s)</h3>

<p>You can write questions also to <a href="mailto:gianluca@romito.net">gianluca@romito.net</a></p>

<h2 id="author">Author</h2>

<p>Gianluca Romito</p>
<h2 id="macros-used">Macros used</h2>
<p>{$SSH_USERNAME}
{$SSH_PASSWORD}</p>

<h2 id="template-links">Template links</h2>
<p>None</p>
<h2 id="discovery-rules">Discovery rules</h2>

<ul>
  <li>Hyperbackup jobs</li>
</ul>

<h2 id="items-collected">Items collected</h2>

<ul>
  <li>Hyperbackup {#BACKUP.NAME}</li>
  <li>Hyperbackup {#BACKUP.NAME} length</li>
  <li>Hyperbackup {#BACKUP.NAME} result</li>
</ul>

<h2 id="triggers">Triggers</h2>
<ul>
  <li>HyperBackup {#BACKUP.NAME} Failed on {DNS.NAME}</li>
</ul>


    </div>
    
    
    <div id="content_ver_5_4" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#storage-devices-synology-template-synology-hyperbackup-using-lld">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Storage_Devices/Synology/template_synology_hyperbackup_using_lld/5.4/template_synology_hyperbackup_using_lld.yaml">Download</a>
      </div>
      
      



<h1 id="template-hyperbackup">Template Hyperbackup</h1>

<h2 id="description">Description</h2>
<p>Attention: TESTED only on 5.4.x. Please give me info if it works correctly on 5.0 too.</p>

<p>Template to monitor Synology Hyperbackup status.</p>

<p>Create a zabbix user in your DSM. The user should be in the administrator group as it must be able to ssh to the DSM. You can disable access to all folders and to all programs/functions.
Login on DSM with administrative/root account and create /etc/sudoers.d/zabbix with this inside:
zabbix ALL = NOPASSWD: /bin/more /var/log/messages, /bin/grep
This tells the system that the user zabbix can run as root only this 2 commands without the root password.</p>

<p>Assign the template to the synology.
Pay attention to: the template uses the Dns name of the synology to do the discovery and other stuff.</p>

<p>In the assigned machine you must define two macros:
{$SSH_USERNAME}
{$SSH_PASSWORD}</p>

<h2 id="overview">Overview</h2>
<p>with this template you can monitor the status of the Hyperbackup on your synology with zabbix.</p>

<h3 id="features">Features</h3>

<p>The template comes with a discovery rule to get all configured backup on the NAS.</p>

<ol>
  <li>The template gives you 3 items:
    <ul>
      <li>The time of the last backup</li>
      <li>How much time the last backup has lasted</li>
      <li>The result</li>
    </ul>
  </li>
  <li>The template comes with one trigger:
    <ul>
      <li>If the status of the last backup is not ok, it will fire.</li>
    </ul>
  </li>
</ol>

<h3 id="environment">Environment</h3>

<p>Tested on Zabbix version 5.4.1</p>
<ul>
  <li>on docker</li>
</ul>

<h3 id="notes">Note(s)</h3>

<p>You can write questions also to <a href="mailto:gianluca@romito.net">gianluca@romito.net</a></p>

<h2 id="author">Author</h2>

<p>Gianluca Romito</p>
<h2 id="macros-used">Macros used</h2>
<p>{$SSH_USERNAME}
{$SSH_PASSWORD}</p>

<h2 id="template-links">Template links</h2>
<p>None</p>
<h2 id="discovery-rules">Discovery rules</h2>

<ul>
  <li>Hyperbackup jobs</li>
</ul>

<h2 id="items-collected">Items collected</h2>

<ul>
  <li>Hyperbackup {#BACKUP.NAME}</li>
  <li>Hyperbackup {#BACKUP.NAME} length</li>
  <li>Hyperbackup {#BACKUP.NAME} result</li>
</ul>

<h2 id="triggers">Triggers</h2>
<ul>
  <li>HyperBackup {#BACKUP.NAME} Failed on {DNS.NAME}</li>
</ul>


    </div>
    
  </div>
  <script>
    (function () {
      
      //console.log('#content_ver_5_4');
      //console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

      
      $('#ver_6_0').click(function () {
        //console.log('#content_ver_6_0');
        //console.log('#ver_6_0');
        $('.readme').hide();
        $('#content_ver_6_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_6_0').addClass('active');
      })
      
      $('#ver_5_4').click(function () {
        //console.log('#content_ver_5_4');
        //console.log('#ver_5_4');
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
      })
      
    })();
  </script>
</body>

</html>