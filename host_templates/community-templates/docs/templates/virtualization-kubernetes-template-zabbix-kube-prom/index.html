<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Kube by Prom API</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <script src="/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Virtualization/Kubernetes/template_zabbix-kube-prom">
    <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">Kube by Prom API</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:containers </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:orchestration </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">title:Kubernetes </a>
					</div>
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_6_0" href="#body">ver. 6.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
    
    
    <div id="content_ver_5_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#virtualization-kubernetes-template-zabbix-kube-prom">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Virtualization/Kubernetes/template_zabbix-kube-prom/5.0/template_zabbix-kube-prom.xml">Download</a>
      </div>
      
      



<h1 id="kube-pod-by-prom-api">Kube Pod by Prom API</h1>

<h2 id="description">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-1">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-1">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-1">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-1">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-1">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-1">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="overview-2">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-2">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-2">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-2">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-2">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[new]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[monitoring]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[spec]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[network]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu_usage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage,fs]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[memory]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Metrics storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[new]&lt;p&gt;Update: 5s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu_usage]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[memory]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[spec]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[network]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage,fs]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[monitoring]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[new,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#METRIC} ({#TYPE},{#RESULT})</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[monitoring,{#METRIC},{#TYPE},{#RESULT}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[spec,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network {#IFNAME}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[network,{#METRIC},{#IFNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - container_cpu_usage_seconds_total</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu_usage,{#CONTAINER},container_cpu_usage_seconds_total]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - Storage {#DEVICE}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC},{#DEVICE}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[memory,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>

<h1 id="kube-by-prom-api">Kube by Prom API</h1>

<h2 id="description-2">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-3">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-3">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-3">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-3">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-3">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-1">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;Prometheus API URL. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">http://prometheus.k8scluster.nuci7.lan:8080/api/v1/</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-1">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-1">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Kube pod</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Kube node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.node.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-1">Items collected</h2>

<p>There are no items in this template.</p>

<h2 id="triggers-1">Triggers</h2>

<p>There are no triggers in this template.</p>

<h1 id="kube-node-by-prom-api">Kube Node by Prom API</h1>

<h2 id="description-3">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-4">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-4">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-4">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-4">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-4">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-4">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-5">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-5">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-5">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-5">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-5">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-2">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>``</td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-2">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-2">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Mounted filesystem discovery</td>
      <td>&lt;p&gt;Discovery of file systems of different types.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Block devices discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network interface discovery</td>
      <td>&lt;p&gt;Discovery of network interfaces. Requires node_exporter v0.18 and up.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-2">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>CPU guest nice time</td>
      <td>&lt;p&gt;Time spent running a niced guest (virtual CPU for guest operating systems under the control of the Linux kernel)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest_nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Version of node_exporter running</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>agent.version[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Maximum number of open file descriptors</td>
      <td>&lt;p&gt;It could be increased by using sysctrl utility or modifying file /etc/sysctl.conf.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>kernel.maxfiles[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU interrupt time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing hardware interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.interrupt[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU utilization</td>
      <td>&lt;p&gt;CPU utilization in %&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.util[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total swap space</td>
      <td>&lt;p&gt;The total space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System uptime</td>
      <td>&lt;p&gt;System uptime in ‘N days, hh:mm:ss’ format.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.uptime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interrupts per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.intr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System name</td>
      <td>&lt;p&gt;System host name.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.name[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU iowait time</td>
      <td>&lt;p&gt;Amount of time the CPU has been waiting for I/O to complete.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.iowait[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (5m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg5[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System local time</td>
      <td>&lt;p&gt;System local time of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.localtime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU softirq time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing software interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.softirq[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU user time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that are not niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.user[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Get node_exporter metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>node_exporter.get&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Memory utilization</td>
      <td>&lt;p&gt;Memory used percentage is calculated as (total-available)/total*100&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vm.memory.util[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space in %</td>
      <td>&lt;p&gt;The free space of swap volume/file in percent.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>system.swap.pfree[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System description</td>
      <td>&lt;p&gt;Labeled system information as provided by the uname system call.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.descr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of CPUs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.num[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU nice time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that have been niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU idle time</td>
      <td>&lt;p&gt;The time the CPU has spent doing nothing.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.idle[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU steal time</td>
      <td>&lt;p&gt;The amount of CPU ‘stolen’ from this virtual machine by the hypervisor for other tasks (such as running another virtual machine).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.steal[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total memory</td>
      <td>&lt;p&gt;Total memory in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system architecture</td>
      <td>&lt;p&gt;Operating system architecture of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.arch[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU system time</td>
      <td>&lt;p&gt;The time the CPU has spent running the kernel and its processes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.system[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (1m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg1[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.os[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space</td>
      <td>&lt;p&gt;The free space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.free[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Available memory</td>
      <td>&lt;p&gt;Available memory, in Linux, available = free + buffers + cache. On other platforms calculation may vary. See also: https://www.zabbix.com/documentation/current/manual/appendix/items/vm.memory.size_params&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.available[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU guest time</td>
      <td>&lt;p&gt;Guest time (time spent running a virtual CPU for a guest operating system)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System boot time</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.boottime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Context switches per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.switches[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of open file descriptors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>fd.open[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (15m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg15[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Space utilization</td>
      <td>&lt;p&gt;Space utilization in % for {#FSNAME}&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.pused[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Used space</td>
      <td>&lt;p&gt;Used storage in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.used[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free space</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.free[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free inodes in %</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Total space</td>
      <td>&lt;p&gt;Total space in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.total[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read request avg waiting time (r_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.read.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write request avg waiting time (w_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.write.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk average queue size (avgqu-sz)</td>
      <td>&lt;p&gt;Current average disk queue, the number of requests outstanding on the disk at the time the performance data is collected.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.queue_size[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read rate</td>
      <td>&lt;p&gt;r/s. The number (after merges) of read requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read time (rate)</td>
      <td>&lt;p&gt;Rate of total read time counter. Used in r_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk utilization</td>
      <td>&lt;p&gt;This item is the percentage of elapsed time that the selected disk drive was busy servicing read or writes requests.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.util[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write rate</td>
      <td>&lt;p&gt;w/s. The number (after merges) of write requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write time (rate)</td>
      <td>&lt;p&gt;Rate of total write time counter. Used in w_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.errors[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits received</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.errors[node_exporter”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits sent</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Speed</td>
      <td>&lt;p&gt;Sets value to 0 if metric is missing in node_exporter output.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.speed[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Operational status</td>
      <td>&lt;p&gt;Indicates the interface RFC2863 operational state as a string. Possible values are:”unknown”, “notpresent”, “down”, “lowerlayerdown”, “testing”,”dormant”, “up”. Reference: https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.status[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Interface type</td>
      <td>&lt;p&gt;node_network_protocol_type protocol_type value of /sys/class/net/<iface>.&lt;/p&gt;</iface></td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.type[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers-2">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].change()}&lt;0 and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&gt;0 and ( {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=6 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=7 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=11 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=62 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=69 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=117 ) and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: ({Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].change()}&gt;0 and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].prev()}&gt;0) or ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].change()}&lt;0 and {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}&gt;0 and ({Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=6 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=1) and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: ({Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].change()}&gt;0 and {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].prev()}&gt;0) or ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% )</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({Kube Node by Prom API:net.if.in[node_exporter,”{#IFNAME}”].avg(15m)}&gt;(90/100)<em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()} or {Kube Node by Prom API:net.if.out[node_exporter,”{#IFNAME}”].avg(15m)}&gt;(90/100)</em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}) and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.in[node_exporter,”{#IFNAME}”].avg(15m)}&lt;((90-3)/100)<em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()} and {Kube Node by Prom API:net.if.out[node_exporter,”{#IFNAME}”].avg(15m)}&lt;((90-3)/100)</em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.in.errors[node_exporter,”{#IFNAME}”].min(5m)}&gt;2 or {Kube Node by Prom API:net.if.out.errors[node_exporter”{#IFNAME}”].min(5m)}&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.in.errors[node_exporter,”{#IFNAME}”].max(5m)}&lt;2<em>0.8 and {Kube Node by Prom API:net.if.out.errors[node_exporter”{#IFNAME}”].max(5m)}&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2 and {Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].diff()}=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.dev.read.await[node_exporter,”{#DEVNAME}”].min(15m)} &gt; 20 or {Kube Node by Prom API:vfs.dev.write.await[node_exporter,”{#DEVNAME}”].min(15m)} &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].last()}&gt;90 and (({Kube Node by Prom API:vfs.fs.total[node_exporter,”{#FSNAME}”].last()}-{Kube Node by Prom API:vfs.fs.used[node_exporter,”{#FSNAME}”].last()})&lt;5G or {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].timeleft(1h,,100)}&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].last()}&gt;80 and (({Kube Node by Prom API:vfs.fs.total[node_exporter,”{#FSNAME}”].last()}-{Kube Node by Prom API:vfs.fs.used[node_exporter,”{#FSNAME}”].last()})&lt;10G or {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].timeleft(1h,,100)}&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”].min(5m)}&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”].min(5m)}&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].last()}&gt;90 and (({Kube Node by Prom API:vfs.fs.total[node_exporter,”{#FSNAME}”].last()}-{Kube Node by Prom API:vfs.fs.used[node_exporter,”{#FSNAME}”].last()})&lt;5G or {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].timeleft(1h,,100)}&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].last()}&gt;80 and (({Kube Node by Prom API:vfs.fs.total[node_exporter,”{#FSNAME}”].last()}-{Kube Node by Prom API:vfs.fs.used[node_exporter,”{#FSNAME}”].last()})&lt;10G or {Kube Node by Prom API:vfs.fs.pused[node_exporter,”{#FSNAME}”].timeleft(1h,,100)}&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”].min(5m)}&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”].min(5m)}&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m) (LLD)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:vfs.dev.read.await[node_exporter,”{#DEVNAME}”].min(15m)} &gt; 20 or {Kube Node by Prom API:vfs.dev.write.await[node_exporter,”{#DEVNAME}”].min(15m)} &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].change()}&lt;0 and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&gt;0 and ( {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=6 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=7 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=11 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=62 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=69 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=117 ) and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: ({Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].change()}&gt;0 and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].prev()}&gt;0) or ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].change()}&lt;0 and {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}&gt;0 and ({Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=6 or {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].last()}=1) and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: ({Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].change()}&gt;0 and {Kube Node by Prom API:net.if.type[node_exporter,”{#IFNAME}”].prev()}&gt;0) or ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% ) (LLD)</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({Kube Node by Prom API:net.if.in[node_exporter,”{#IFNAME}”].avg(15m)}&gt;(90/100)<em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()} or {Kube Node by Prom API:net.if.out[node_exporter,”{#IFNAME}”].avg(15m)}&gt;(90/100)</em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}) and {Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.in[node_exporter,”{#IFNAME}”].avg(15m)}&lt;((90-3)/100)<em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()} and {Kube Node by Prom API:net.if.out[node_exporter,”{#IFNAME}”].avg(15m)}&lt;((90-3)/100)</em>{Kube Node by Prom API:net.if.speed[node_exporter,”{#IFNAME}”].last()}&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m) (LLD)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {Kube Node by Prom API:net.if.in.errors[node_exporter,”{#IFNAME}”].min(5m)}&gt;2 or {Kube Node by Prom API:net.if.out.errors[node_exporter”{#IFNAME}”].min(5m)}&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.in.errors[node_exporter,”{#IFNAME}”].max(5m)}&lt;2<em>0.8 and {Kube Node by Prom API:net.if.out.errors[node_exporter”{#IFNAME}”].max(5m)}&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down (LLD)</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and ({Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}=2 and {Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].diff()}=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {Kube Node by Prom API:net.if.status[node_exporter,”{#IFNAME}”].last()}&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
  </tbody>
</table>


    </div>
    
    
    <div id="content_ver_6_0" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#virtualization-kubernetes-template-zabbix-kube-prom">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Virtualization/Kubernetes/template_zabbix-kube-prom/6.0/template_zabbix-kube-prom.yaml">Download</a>
      </div>
      
      



<h1 id="kube-by-prom-api">Kube by Prom API</h1>

<h2 id="description">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;Prometheus API URL. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">http://prometheus.k8scluster.nuci7.lan:8080/api/v1/</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Kube pod</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Kube node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.node.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<p>There are no items in this template.</p>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>

<h1 id="kube-node-by-prom-api">Kube Node by Prom API</h1>

<h2 id="description-1">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-1">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-1">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-1">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-1">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-1">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-2">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-2">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-2">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-2">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-2">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-2">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-1">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>``</td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-1">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-1">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Block devices discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Mounted filesystem discovery</td>
      <td>&lt;p&gt;Discovery of file systems of different types.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network interface discovery</td>
      <td>&lt;p&gt;Discovery of network interfaces. Requires node_exporter v0.18 and up.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-1">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Load average (1m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg1[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU guest time</td>
      <td>&lt;p&gt;Guest time (time spent running a virtual CPU for a guest operating system)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU idle time</td>
      <td>&lt;p&gt;The time the CPU has spent doing nothing.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.idle[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system architecture</td>
      <td>&lt;p&gt;Operating system architecture of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.arch[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System boot time</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.boottime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interrupts per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.intr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Available memory</td>
      <td>&lt;p&gt;Available memory, in Linux, available = free + buffers + cache. On other platforms calculation may vary. See also: https://www.zabbix.com/documentation/current/manual/appendix/items/vm.memory.size_params&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.available[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Version of node_exporter running</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>agent.version[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System description</td>
      <td>&lt;p&gt;Labeled system information as provided by the uname system call.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.descr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Context switches per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.switches[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (5m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg5[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space</td>
      <td>&lt;p&gt;The free space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.free[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU system time</td>
      <td>&lt;p&gt;The time the CPU has spent running the kernel and its processes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.system[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (15m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg15[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System uptime</td>
      <td>&lt;p&gt;System uptime in ‘N days, hh:mm:ss’ format.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.uptime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total swap space</td>
      <td>&lt;p&gt;The total space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Get node_exporter metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>node_exporter.get&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System local time</td>
      <td>&lt;p&gt;System local time of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.localtime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System name</td>
      <td>&lt;p&gt;System host name.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.name[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU user time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that are not niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.user[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU iowait time</td>
      <td>&lt;p&gt;Amount of time the CPU has been waiting for I/O to complete.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.iowait[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU utilization</td>
      <td>&lt;p&gt;CPU utilization in %&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.util[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU softirq time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing software interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.softirq[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Memory utilization</td>
      <td>&lt;p&gt;Memory used percentage is calculated as (total-available)/total*100&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vm.memory.util[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU guest nice time</td>
      <td>&lt;p&gt;Time spent running a niced guest (virtual CPU for guest operating systems under the control of the Linux kernel)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest_nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU interrupt time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing hardware interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.interrupt[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of open file descriptors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>fd.open[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.os[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total memory</td>
      <td>&lt;p&gt;Total memory in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space in %</td>
      <td>&lt;p&gt;The free space of swap volume/file in percent.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>system.swap.pfree[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Maximum number of open file descriptors</td>
      <td>&lt;p&gt;It could be increased by using sysctrl utility or modifying file /etc/sysctl.conf.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>kernel.maxfiles[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU steal time</td>
      <td>&lt;p&gt;The amount of CPU ‘stolen’ from this virtual machine by the hypervisor for other tasks (such as running another virtual machine).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.steal[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of CPUs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.num[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU nice time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that have been niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read request avg waiting time (r_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.read.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write request avg waiting time (w_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.write.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk average queue size (avgqu-sz)</td>
      <td>&lt;p&gt;Current average disk queue, the number of requests outstanding on the disk at the time the performance data is collected.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.queue_size[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read rate</td>
      <td>&lt;p&gt;r/s. The number (after merges) of read requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read time (rate)</td>
      <td>&lt;p&gt;Rate of total read time counter. Used in r_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk utilization</td>
      <td>&lt;p&gt;This item is the percentage of elapsed time that the selected disk drive was busy servicing read or writes requests.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.util[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write rate</td>
      <td>&lt;p&gt;w/s. The number (after merges) of write requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write time (rate)</td>
      <td>&lt;p&gt;Rate of total write time counter. Used in w_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Space utilization</td>
      <td>&lt;p&gt;Space utilization in % for {#FSNAME}&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.pused[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Used space</td>
      <td>&lt;p&gt;Used storage in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.used[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free space</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.free[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free inodes in %</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Total space</td>
      <td>&lt;p&gt;Total space in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.total[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.errors[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits received</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.errors[node_exporter”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits sent</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Speed</td>
      <td>&lt;p&gt;Sets value to 0 if metric is missing in node_exporter output.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.speed[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Operational status</td>
      <td>&lt;p&gt;Indicates the interface RFC2863 operational state as a string. Possible values are:”unknown”, “notpresent”, “down”, “lowerlayerdown”, “testing”,”dormant”, “up”. Reference: https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.status[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Interface type</td>
      <td>&lt;p&gt;node_network_protocol_type protocol_type value of /sys/class/net/<iface>.&lt;/p&gt;</iface></td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.type[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers-1">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and ( last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=7 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=11 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=62 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=69 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=117 ) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and (last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=1) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% )</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) or avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])) and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) and avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&gt;2 or min(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: max(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&lt;2<em>0.8 and max(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#1)&lt;&gt;last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#2))=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.dev.read.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20 or min(/Kube Node by Prom API/vfs.dev.write.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;90 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;5G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;80 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;10G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m) (LLD)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.dev.read.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20 or min(/Kube Node by Prom API/vfs.dev.write.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;90 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;5G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;80 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;10G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and ( last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=7 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=11 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=62 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=69 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=117 ) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and (last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=1) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% ) (LLD)</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) or avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])) and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) and avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m) (LLD)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&gt;2 or min(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: max(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&lt;2<em>0.8 and max(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down (LLD)</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#1)&lt;&gt;last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#2))=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
  </tbody>
</table>

<h1 id="kube-pod-by-prom-api">Kube Pod by Prom API</h1>

<h2 id="description-3">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-3">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-3">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-3">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-3">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-3">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-4">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-4">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-4">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-4">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-4">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-4">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="overview-5">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-5">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-5">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-5">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-5">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-2">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-2">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-2">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[memory]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage,fs]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[new]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[monitoring]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[network]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[spec]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu_usage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-2">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Metrics spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[spec]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage,fs]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[monitoring]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[network]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[new]&lt;p&gt;Update: 5s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[memory]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu_usage]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[memory,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - Storage {#DEVICE}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC},{#DEVICE}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[new,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#METRIC} ({#TYPE},{#RESULT})</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[monitoring,{#METRIC},{#TYPE},{#RESULT}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network {#IFNAME}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[network,{#METRIC},{#IFNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[spec,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - container_cpu_usage_seconds_total</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu_usage,{#CONTAINER},container_cpu_usage_seconds_total]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers-2">Triggers</h2>

<p>There are no triggers in this template.</p>


    </div>
    
    
    <div id="content_ver_5_4" class="readme">
      <div class="banner-buttons " style="padding-top: 20px; ">
        <a class="button button-gray" style="color: #ffff;" href="/#virtualization-kubernetes-template-zabbix-kube-prom">Back to index</a>
        <a class="button button-green" style="color: #ffff;" href="https://raw.githubusercontent.com/zabbix/community-templates/main/Virtualization/Kubernetes/template_zabbix-kube-prom/5.4/template_zabbix-kube-prom.yaml">Download</a>
      </div>
      
      



<h1 id="kube-by-prom-api">Kube by Prom API</h1>

<h2 id="description">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;Prometheus API URL. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">http://prometheus.k8scluster.nuci7.lan:8080/api/v1/</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.IP.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.NODE.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in node discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.NAMESPACE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.SERVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in pod discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Kube pod</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Kube node</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.node.discovery&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected">Items collected</h2>

<p>There are no items in this template.</p>

<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>

<h1 id="kube-node-by-prom-api">Kube Node by Prom API</h1>

<h2 id="description-1">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-1">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-1">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-1">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-1">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-1">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-2">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-2">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-2">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-2">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-2">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-2">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-1">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$CPU.UTIL.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.ERRORS.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">2</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IF.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$IFCONTROL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$KERNEL.MAXFILES.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">256</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$LOAD_AVG_PER_CPU.MAX.WARN}</td>
      <td>&lt;p&gt;Load per CPU considered sustainable. Tune if needed.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">1.5</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.AVAILABLE.MIN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20M</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$MEMORY.UTIL.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFALIAS.NOT_MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Filter out loopbacks, nulls, docker veth links and docker0 bridge by default&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">(^Software Loopback Interface|^NULL[0-9.]*$|^[Ll]o[0-9.]*$|^[Ss]ystem$|^Nu[0-9.]*$|^veth[0-9a-z]+$|docker[0-9]+|br-[a-z0-9]{12})</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.MATCHES}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NET.IF.IFOPERSTATUS.NOT_MATCHES}</td>
      <td>&lt;p&gt;Ignore notPresent(7)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^7$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$NODE_EXPORTER_PORT}</td>
      <td>&lt;p&gt;TCP Port node_exporter is listening on.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">9100</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.API.URL}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>``</td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SWAP.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">50</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$SYSTEM.FUZZYTIME.MAX}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">60</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.DEVNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in block devices discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(loop[0-9]*|sd[a-z][0-9]+|nbd[0-9]+|sr[0-9]+|fd[0-9]+|dm-[0-9]+|ram[0-9]+|ploop[a-z0-9]+|md[0-9]*|hcp[0-9]*|zram[0-9]*)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.READ.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk read average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.DEV.WRITE.AWAIT.WARN}</td>
      <td>&lt;p&gt;Disk write average response time (in ms) before the trigger would fire&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.+$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSDEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">.+</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(/dev|/sys|/run|/proc|.+/shm$)</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.FSTYPE.NOT_MATCHES}</td>
      <td>&lt;p&gt;This macro is used in filesystems discovery. Can be overridden on the host or linked template level&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^\s$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">10</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.INODE.PFREE.MIN.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">20</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.CRIT}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">90</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$VFS.FS.PUSED.MAX.WARN}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">80</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-1">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-1">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Block devices discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Mounted filesystem discovery</td>
      <td>&lt;p&gt;Discovery of file systems of different types.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network interface discovery</td>
      <td>&lt;p&gt;Discovery of network interfaces. Requires node_exporter v0.18 and up.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.discovery[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-1">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Load average (1m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg1[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU guest time</td>
      <td>&lt;p&gt;Guest time (time spent running a virtual CPU for a guest operating system)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU idle time</td>
      <td>&lt;p&gt;The time the CPU has spent doing nothing.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.idle[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system architecture</td>
      <td>&lt;p&gt;Operating system architecture of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.arch[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System boot time</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.boottime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interrupts per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.intr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Available memory</td>
      <td>&lt;p&gt;Available memory, in Linux, available = free + buffers + cache. On other platforms calculation may vary. See also: https://www.zabbix.com/documentation/current/manual/appendix/items/vm.memory.size_params&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.available[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Version of node_exporter running</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>agent.version[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System description</td>
      <td>&lt;p&gt;Labeled system information as provided by the uname system call.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.descr[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Context switches per second</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.switches[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (5m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg5[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space</td>
      <td>&lt;p&gt;The free space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.free[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU system time</td>
      <td>&lt;p&gt;The time the CPU has spent running the kernel and its processes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.system[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Load average (15m avg)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.load.avg15[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System uptime</td>
      <td>&lt;p&gt;System uptime in ‘N days, hh:mm:ss’ format.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.uptime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total swap space</td>
      <td>&lt;p&gt;The total space of swap volume/file in bytes.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.swap.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Get node_exporter metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>node_exporter.get&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System local time</td>
      <td>&lt;p&gt;System local time of the host.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.localtime[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>System name</td>
      <td>&lt;p&gt;System host name.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.name[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU user time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that are not niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.user[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU iowait time</td>
      <td>&lt;p&gt;Amount of time the CPU has been waiting for I/O to complete.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.iowait[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU utilization</td>
      <td>&lt;p&gt;CPU utilization in %&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.util[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU softirq time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing software interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.softirq[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Memory utilization</td>
      <td>&lt;p&gt;Memory used percentage is calculated as (total-available)/total*100&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vm.memory.util[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU guest nice time</td>
      <td>&lt;p&gt;Time spent running a niced guest (virtual CPU for guest operating systems under the control of the Linux kernel)&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.guest_nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU interrupt time</td>
      <td>&lt;p&gt;The amount of time the CPU has been servicing hardware interrupts.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.interrupt[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of open file descriptors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>fd.open[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Operating system</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.sw.os[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Total memory</td>
      <td>&lt;p&gt;Total memory in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vm.memory.total[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Free swap space in %</td>
      <td>&lt;p&gt;The free space of swap volume/file in percent.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>system.swap.pfree[node_exporter]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Maximum number of open file descriptors</td>
      <td>&lt;p&gt;It could be increased by using sysctrl utility or modifying file /etc/sysctl.conf.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>kernel.maxfiles[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU steal time</td>
      <td>&lt;p&gt;The amount of CPU ‘stolen’ from this virtual machine by the hypervisor for other tasks (such as running another virtual machine).&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.steal[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Number of CPUs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.num[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>CPU nice time</td>
      <td>&lt;p&gt;The time the CPU has spent running users’ processes that have been niced.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>system.cpu.nice[node_exporter]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read request avg waiting time (r_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.read.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write request avg waiting time (w_await)</td>
      <td>&lt;p&gt;This formula contains two boolean expressions that evaluates to 1 or 0 in order to set calculated metric to zero and to avoid division by zero exception.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.dev.write.await[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk average queue size (avgqu-sz)</td>
      <td>&lt;p&gt;Current average disk queue, the number of requests outstanding on the disk at the time the performance data is collected.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.queue_size[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read rate</td>
      <td>&lt;p&gt;r/s. The number (after merges) of read requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read time (rate)</td>
      <td>&lt;p&gt;Rate of total read time counter. Used in r_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.read.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk utilization</td>
      <td>&lt;p&gt;This item is the percentage of elapsed time that the selected disk drive was busy servicing read or writes requests.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.util[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write rate</td>
      <td>&lt;p&gt;w/s. The number (after merges) of write requests completed per second for the device.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk write time (rate)</td>
      <td>&lt;p&gt;Rate of total write time counter. Used in w_await calculation&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.dev.write.time.rate[node_exporter,”{#DEVNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Space utilization</td>
      <td>&lt;p&gt;Space utilization in % for {#FSNAME}&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.pused[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Used space</td>
      <td>&lt;p&gt;Used storage in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Calculated</code></td>
      <td>vfs.fs.used[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 1m&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free space</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.free[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Free inodes in %</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Total space</td>
      <td>&lt;p&gt;Total space in Bytes&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>vfs.fs.total[node_exporter,”{#FSNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Inbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in.errors[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits received</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.in[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets discarded</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.discards[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Outbound packets with errors</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out.errors[node_exporter”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Bits sent</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.out[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Speed</td>
      <td>&lt;p&gt;Sets value to 0 if metric is missing in node_exporter output.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.speed[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Operational status</td>
      <td>&lt;p&gt;Indicates the interface RFC2863 operational state as a string. Possible values are:”unknown”, “notpresent”, “down”, “lowerlayerdown”, “testing”,”dormant”, “up”. Reference: https://www.kernel.org/doc/Documentation/ABI/testing/sysfs-class-net&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.status[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Interface type</td>
      <td>&lt;p&gt;node_network_protocol_type protocol_type value of /sys/class/net/<iface>.&lt;/p&gt;</iface></td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>net.if.type[node_exporter,”{#IFNAME}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers-1">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and ( last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=7 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=11 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=62 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=69 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=117 ) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and (last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=1) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% )</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) or avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])) and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) and avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&gt;2 or min(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: max(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&lt;2<em>0.8 and max(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#1)&lt;&gt;last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#2))=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.dev.read.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20 or min(/Kube Node by Prom API/vfs.dev.write.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;90 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;5G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;80 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;10G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#DEVNAME}: Disk read/write request responses are too high (read &gt; {$VFS.DEV.READ.AWAIT.WARN:”{#DEVNAME}”} ms for 15m or write &gt; {$VFS.DEV.WRITE.AWAIT.WARN:”{#DEVNAME}”} ms for 15m) (LLD)</td>
      <td>&lt;p&gt;This trigger might indicate disk {#DEVNAME} saturation.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.dev.read.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20 or min(/Kube Node by Prom API/vfs.dev.write.await[node_exporter,”{#DEVNAME}”],15m) &gt; 20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 5G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;90 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;5G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:”{#FSNAME}”}. Second condition should be one of the following: - The disk free space is less than 10G. - The disk will be full in less than 24 hours.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”])&gt;80 and ((last(/Kube Node by Prom API/vfs.fs.total[node_exporter,”{#FSNAME}”])-last(/Kube Node by Prom API/vfs.fs.used[node_exporter,”{#FSNAME}”]))&lt;10G or timeleft(/Kube Node by Prom API/vfs.fs.pused[node_exporter,”{#FSNAME}”],1h,100)&lt;1d)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;10&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:”{#FSNAME}”}%) (LLD)</td>
      <td>&lt;p&gt;It may become impossible to write to disk if there are no index nodes left. As symptoms, ‘No space left on device’ or ‘Disk is full’ errors may be seen even though free space is available.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/vfs.fs.inode.pfree[node_exporter,”{#FSNAME}”],5m)&lt;20&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and ( last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=7 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=11 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=62 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=69 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=117 ) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Ethernet has changed to lower speed than it was before (LLD)</td>
      <td>&lt;p&gt;This Ethernet connection has transitioned down from its known maximum speed. This might be a sign of autonegotiation issues. Ack to close.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&lt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and (last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=6 or last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])=1) and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: (change(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”])&gt;0 and last(/Kube Node by Prom API/net.if.type[node_exporter,”{#IFNAME}”],#2)&gt;0) or (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2)&lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High bandwidth usage ( &gt; {$IF.UTIL.MAX:”{#IFNAME}”}% ) (LLD)</td>
      <td>&lt;p&gt;The network interface utilization is close to its estimated maximum bandwidth.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) or avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&gt;(90/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])) and last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: avg(/Kube Node by Prom API/net.if.in[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)<em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”]) and avg(/Kube Node by Prom API/net.if.out[node_exporter,”{#IFNAME}”],15m)&lt;((90-3)/100)</em>last(/Kube Node by Prom API/net.if.speed[node_exporter,”{#IFNAME}”])&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): High error rate ( &gt; {$IF.ERRORS.WARN:”{#IFNAME}”} for 5m) (LLD)</td>
      <td>&lt;p&gt;Recovers when below 80% of {$IF.ERRORS.WARN:”{#IFNAME}”} threshold&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: min(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&gt;2 or min(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&gt;2&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: max(/Kube Node by Prom API/net.if.in.errors[node_exporter,”{#IFNAME}”],5m)&lt;2<em>0.8 and max(/Kube Node by Prom API/net.if.out.errors[node_exporter”{#IFNAME}”],5m)&lt;2</em>0.8&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>Interface {#IFNAME}({#IFALIAS}): Link down (LLD)</td>
      <td>&lt;p&gt;This trigger expression works as follows: 1. Can be triggered if operations status is down. 2. {$IFCONTROL:”{#IFNAME}”}=1 - user can redefine Context macro to value - 0. That marks this interface as not important. No new trigger will be fired if this interface is down. 3. {TEMPLATE_NAME:METRIC.diff()}=1) - trigger fires only if operational status was up(1) sometime before. (So, do not fire ‘ethernal off’ interfaces.) WARNING: if closed manually - won’t fire again on next poll, because of .diff.&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: 1=1 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])=2 and (last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#1)&lt;&gt;last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”],#2))=1)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/Kube Node by Prom API/net.if.status[node_exporter,”{#IFNAME}”])&lt;&gt;2&lt;/p&gt;</td>
      <td>average</td>
    </tr>
  </tbody>
</table>

<h1 id="kube-pod-by-prom-api">Kube Pod by Prom API</h1>

<h2 id="description-3">Description</h2>

<p>This template works out of the box as soon as Prometheus (Prometheus-operator) is available inside your cluster; it does not require any Zabbix agent installation or configuration. It allows external monitoring of the Kubernetes cluster through ingress, without any NodePort declaration. It uses the Prometheus API to create a Zabbix host for each pod available inside the Kubernetes cluster. {$PROM.API.URL} must contains the Prometheus entry point into your Kubernetes cluster. Zabbix pod hosts are created with the “Template Kube Pod by Prom API” template by default.</p>

<h2 id="overview-3">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-3">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-3">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-3">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-3">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="description-4">Description</h2>

<p>Official Linux template using node exporter. Known Issues: Description: node_exporter v0.16.0 renamed many metrics. CPU utilization for ‘guest’ and ‘guest_nice’ metrics are not supported in this template with node_exporter &lt; 0.16. Disk IO metrics are not supported. Other metrics provided as ‘best effort’. See https://github.com/prometheus/node_exporter/releases/tag/v0.16.0 for details. Version: below 0.16.0 Description: metric node_network_info with label ‘device’ cannot be found, so network discovery is not possible. Version: below 0.18 You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/387225-discussion-thread-for-official-zabbix-template-for-linux Template tooling version used: 0.34</p>

<h2 id="overview-4">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-4">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-4">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-4">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-4">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="overview-5">Overview</h2>

<p>### Description</p>

<p>zabbix-kube-prom is a batch of Zabbix LLD templates for Zabbix server.</p>

<p>It is used for external Kubernetes monitoring by Zabbix via Prometheus API.</p>

<h3 id="installation-5">Installation</h3>

<ol>
  <li>Install <a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack">kube-prometheus-stack</a> into the Kubernetes cluster.</li>
  <li>Import global Zabbix Template (zabbix-kube-prom.xml) into your Zabbix server.</li>
  <li>Create or import a host identifying your Kubernetes cluster where Prometheus is deployed.</li>
  <li>Let LLD create discovered nodes as new “Zabbix hosts”</li>
  <li>Let LLD create discovered pods as new “Virtual Zabbix hosts</li>
</ol>

<h3 id="templates-5">Templates</h3>

<p>The global export (zabbix-kube-prom.xml) contains following templates:</p>

<table>
  <thead>
    <tr>
      <th>Templates</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template Kube by Prom API</td>
      <td>Creates a Zabbix host for each pod and node discovered.</td>
    </tr>
    <tr>
      <td>Template Kube Node by Prom API</td>
      <td>Template applied to the created host (node).</td>
    </tr>
    <tr>
      <td>Template Kube Pod by Prom API</td>
      <td>Template applied to the created host (pod).</td>
    </tr>
  </tbody>
</table>

<h3 id="licenses-5">Licenses</h3>

<table>
  <thead>
    <tr>
      <th>Template</th>
      <th>License</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Template OS Linux by Prom</td>
      <td><em>GNU General Public License v2.0 or later</em><a href="https://github.com/zabbix/zabbix/blob/master/README">Copyright (C) 2001-2021 Zabbix SIA</a></td>
    </tr>
    <tr>
      <td>Template Kube by Prom APITemplate Kube Node by Prom APITemplate Kube Pod by Prom API</td>
      <td><em>GNU General Public License v3.0</em><a href="https://www.stago.com/">Copyright (C) 2021 Diagnostica Stago</a></td>
    </tr>
  </tbody>
</table>

<hr />

<h2 id="author-5">Author</h2>

<p>Laurent Marchelli</p>

<h2 id="macros-used-2">Macros used</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Default</th>
      <th>Type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>{$PROM.POD.DEVICE.MATCHES}</td>
      <td>&lt;p&gt;Device regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.DEVICE.NOT_MATCHES}</td>
      <td>&lt;p&gt;Device interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">^.*$</code></td>
      <td>Text macro</td>
    </tr>
    <tr>
      <td>{$PROM.POD.IFNAME.NOT_MATCHES}</td>
      <td>&lt;p&gt;Network interface regex used in pod’s metric discovery. Can be overridden on the host or linked template level.&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">CHANGE_IF_NEEDED</code></td>
      <td>Text macro</td>
    </tr>
  </tbody>
</table>

<h2 id="template-links-2">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules-2">Discovery rules</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Discovery memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[memory]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage,fs]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Discovery</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[new]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[monitoring]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[storage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[network]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[spec]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Discovery cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.discovery[cpu_usage]&lt;p&gt;Update: 0&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="items-collected-2">Items collected</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Type</th>
      <th>Key and additional info</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Metrics spec</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[spec]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics storage_fs</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage,fs]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics storage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[storage]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics monitoring</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[monitoring]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics network</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[network]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>_New Metrics</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[new]&lt;p&gt;Update: 5s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics memory</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[memory]&lt;p&gt;Update: 1m&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Metrics cpu_usage</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">HTTP agent</code></td>
      <td>prom.pod.metrics[cpu_usage]&lt;p&gt;Update: 30s&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[memory,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - Storage {#DEVICE}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC},{#DEVICE}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[new,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#METRIC} ({#TYPE},{#RESULT})</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[monitoring,{#METRIC},{#TYPE},{#RESULT}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[storage,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>Network {#IFNAME}: {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[network,{#METRIC},{#IFNAME}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - {#METRIC}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[spec,{#CONTAINER},{#METRIC}]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
    <tr>
      <td>{#CONTAINER} - container_cpu_usage_seconds_total</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td><code class="language-plaintext highlighter-rouge">Dependent item</code></td>
      <td>prom.pod.metrics[cpu_usage,{#CONTAINER},container_cpu_usage_seconds_total]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;</td>
    </tr>
  </tbody>
</table>

<h2 id="triggers-2">Triggers</h2>

<p>There are no triggers in this template.</p>


    </div>
    
  </div>
  <script>
    (function () {
      
      //console.log('#content_ver_5_4');
      //console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

      
      $('#ver_5_0').click(function () {
        //console.log('#content_ver_5_0');
        //console.log('#ver_5_0');
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
      })
      
      $('#ver_6_0').click(function () {
        //console.log('#content_ver_6_0');
        //console.log('#ver_6_0');
        $('.readme').hide();
        $('#content_ver_6_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_6_0').addClass('active');
      })
      
      $('#ver_5_4').click(function () {
        //console.log('#content_ver_5_4');
        //console.log('#ver_5_4');
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
      })
      
    })();
  </script>
</body>

</html>